(function(t){function e(e){for(var i,n,o=e[0],u=e[1],c=e[2],l=0,f=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&f.push(r[n][0]),r[n]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);d&&d(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,o=1;o<a.length;o++){var u=a[o];0!==r[u]&&(i=!1)}i&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var i={},r={app:0},s=[];function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=u;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},cd49:function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},s=[],n=i["a"].extend({name:"App"}),o=n,u=a("2877"),c=Object(u["a"])(o,r,s,!1,null,null,null),d=c.exports,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"editor"}},[a("editor-controller",{attrs:{"selected-key":t.selectedKey,"load-score-data-str":t.loadScoreDataStr,"load-music-url":t.loadMusicUrl}})],1)},f=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"editor-controller"}},[a("editor-main",{attrs:{"page-num":t.pageNum,"load-score-data":t.scoreData,"load-music-url":t.loadMusicUrl,"key-config":t.keyConfig,"key-kind":t.keyKind,timing:t.timing,"prop-score-number":t.scoreNumber,"music-volume":t.musicVolume,"music-rate":t.musicRate},on:{"page-minus":t.pageMinus,"page-plus":t.pagePlus}}),a("editor-option",{attrs:{scoreNumber:t.scoreNumber,musicVolume:t.musicVolume,musicRate:t.musicRate},on:{"update:scoreNumber":function(e){t.scoreNumber=e},"update:score-number":function(e){t.scoreNumber=e},"update:musicVolume":function(e){t.musicVolume=e},"update:music-volume":function(e){t.musicVolume=e},"update:musicRate":function(e){t.musicRate=e},"update:music-rate":function(e){t.musicRate=e}}}),a("div",{attrs:{id:"editor-menu"}},[a("div",{staticClass:"menu-item-container",attrs:{id:"menu-page"}},[t._m(0),a("div",{staticClass:"menu-move-display"},[a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.pageMinus(5)}}},[t._v("◁")]),a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.pageMinus(1)}}},[t._v("◁")]),a("div",{staticClass:"menu-move-txt"},[t._v(t._s(t.pageNum))]),a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.pagePlus(1)}}},[t._v("▷")]),a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.pagePlus(5)}}},[t._v("▷")])])]),a("div",{staticClass:"menu-item-container",attrs:{id:"menu-label"}},[a("div",{staticClass:"menu-move-header"},[a("div",{staticClass:"menu-txt"},[t._v("Label")]),a("input",{ref:"label-checkbox",staticClass:"uk-checkbox",attrs:{id:"menu-label-checkbox",type:"checkbox",disabled:1===t.pageNum},domProps:{checked:-1!==t.getLabelNumByPageNum(t.pageNum)},on:{click:t.callLabelOperation}})]),a("div",{staticClass:"menu-move-display"},[a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.labelMinus(5)}}},[t._v("◁")]),a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.labelMinus(1)}}},[t._v("◁")]),a("div",{staticClass:"menu-move-txt"},[t._v(t._s(t.labelNum))]),a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.labelPlus(1)}}},[t._v("▷")]),a("div",{staticClass:"menu-move-btn",on:{click:function(e){return t.labelPlus(5)}}},[t._v("▷")])])]),a("div",{staticClass:"menu-item-container",attrs:{id:"menu-adj"}},[a("div",{staticClass:"menu-txt"},[t._v("Blank Frame")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.scoreData.blankFrame,expression:"scoreData.blankFrame",modifiers:{number:!0}}],staticClass:"uk-input uk-form-small",attrs:{type:"number",step:"0.01"},domProps:{value:t.scoreData.blankFrame},on:{input:function(e){e.target.composing||t.$set(t.scoreData,"blankFrame",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"menu-item-container",attrs:{id:"menu-sn"}},[a("div",{staticClass:"menu-txt"},[t._v("Start Number")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.timing.startNum,expression:"timing.startNum",modifiers:{number:!0}}],staticClass:"uk-input uk-form-small",attrs:{type:"number",step:"0.01"},domProps:{value:t.timing.startNum},on:{input:function(e){e.target.composing||t.$set(t.timing,"startNum",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"menu-item-container",attrs:{id:"menu-bpm"}},[a("div",{staticClass:"menu-txt"},[t._v("BPM")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.timing.bpm,expression:"timing.bpm",modifiers:{number:!0}}],staticClass:"uk-input uk-form-small",attrs:{type:"number",step:"0.01"},domProps:{value:t.timing.bpm},on:{input:function(e){e.target.composing||t.$set(t.timing,"bpm",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"menu-item-container",attrs:{id:"menu-output"}},[a("a",{staticClass:"menu-output-btn btn-orange",attrs:{href:"#editor-option","uk-toggle":""}},[t._v("OPTION")]),a("div",{staticClass:"menu-output-btn btn-gray",on:{click:t.convertWithQuarters}},[t._v(" TEST ")]),a("div",{staticClass:"menu-output-btn btn-blue",on:{click:t.save}},[t._v("SAVE")]),a("div",{staticClass:"menu-output-btn btn-gray",on:{click:t.displayScoreDataInfo}},[t._v(" CALC ")]),a("div",{staticClass:"menu-output-btn btn-red",on:{click:t.convert}},[t._v("GO!")])])]),a("router-link",{staticClass:"uk-modal-close-default editor-close",attrs:{type:"button",href:"../","uk-close":"",to:{name:"start",path:"/"}}})],1)},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-move-header"},[a("div",{staticClass:"menu-txt"},[t._v("Page")])])}],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"editor-main"}},[a("div",{ref:"canvas",attrs:{id:"canvas",tabindex:"-1"},on:{keydown:function(e){return e.preventDefault(),t.keydownAction(e)}}}),t._l(t.scoreData.scores[t.page-1].speeds,(function(e,i){return a("speed-piece",{key:i,attrs:{position:e.position,type:e.type,isReverse:t.isReverse},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"speed.value"}})}))],2)},y=[],v=a("9ab4"),_=a("362d"),g=a.n(_),K=function(){function t(t){this.speeds=[],this.notes=new Array(t).fill([]).map((function(){return[]})),this.freezes=new Array(t).fill([]).map((function(){return[]}))}return t}(),b=30,z=5,D=384,S=D,k=D/8,w=60,N=50,L=20,C=["#ff0000","#0000ff","#00cc00","#ff9000"],R=["#ff4dd2","#00ffff","#ceff00","#c99b7d"],P=["#fff0ff","#f0f0ff","#f0fff0","#fff0dd"],x=function(){function t(t){this.audio=t,t.load()}return t.prototype.play=function(t,e,a){var i=this;this.audio.volume=e,this.audio.playbackRate=a;var r=this.audio.duration;r>t&&(this.audio.currentTime=t,t<0?setTimeout((function(){return i.audio.play()}),1e3*-t):this.audio.play())},t.prototype.pause=function(t){this.audio.pause(),clearTimeout(t)},t}();function O(t,e){return e?t:D-t}var M=function(){function t(t,e,a,i,r,s){this.scoreData=t,this.keyConfig=e,this.keyKind=a,this.isReverse=i,this.stage=r,this.notesLayer=s,this.keyNum=this.keyConfig[this.keyKind].num}return t.prototype.hasNote=function(t,e,a){var i=this.scoreData.scores[t-1],r=i.freezes[e].includes(a),s=i.notes[e].includes(a)||r;return{exists:s,isFreeze:r}},t.prototype.add=function(t,e,a,i){i?this.scoreData.scores[t-1].freezes[e].push(a):this.scoreData.scores[t-1].notes[e].push(a)},t.prototype.remove=function(t,e,a){var i=this.scoreData.scores[t-1].freezes[e].filter((function(t){return t!==a}));this.scoreData.scores[t-1].freezes.splice(e,1,i);var r=this.scoreData.scores[t-1].notes[e].filter((function(t){return t!==a}));this.scoreData.scores[t-1].notes.splice(e,1,r)},t.prototype.draw=function(t,e,a){var i=this.stage,r=this.notesLayer,s=this.keyConfig[this.keyKind].colorGroup,n=function(t,e){return e?R[s[t]]:C[s[t]]}(t,a),o=new g.a.Rect({x:t*b,y:O(e,this.isReverse)-z/2,width:b,height:z,fill:n,id:"note-"+t+"-"+e});r.add(o),i.add(r)},t.prototype.clear=function(t,e){var a=this.stage,i=this.notesLayer,r=i.findOne("#note-"+t+"-"+e);r.destroy(),a.add(i)},t.prototype.removeOnPosition=function(t,e){for(var a=this.keyNum,i=[],r=0;r<a;r++)this.hasNote(t,r,e).exists&&(this.remove(t,r,e),i.push({lane:r,isFreeze:this.hasNote(t,r,e).isFreeze}));return i},t.prototype.shift=function(t,e,a){var i=this,r=e+a,s=t;if(r<0){if(1===t)return;s--,r+=D}else r>=D&&(s++,r-=D);var n=this.removeOnPosition(t,e);this.removeOnPosition(s,r),n.forEach((function(t){return i.add(s,t.lane,r,t.isFreeze)}))},t}(),U=function(){function t(t,e,a,i,r){this.scoreData=t,this.editorWidth=e,this.isReverse=a,this.stage=i,this.notesLayer=r}return t.prototype.hasSpeedPiece=function(t,e){return this.scoreData.scores[t-1].speeds.some((function(t){return t.position===e}))},t.prototype.add=function(t,e,a,i){void 0===i&&(i=1),this.scoreData.scores[t-1].speeds.push({position:e,value:i,type:a})},t.prototype.remove=function(t,e){this.scoreData.scores[t-1].speeds=this.scoreData.scores[t-1].speeds.filter((function(t){return t.position!==e}))},t.prototype.draw=function(t,e){var a=this.stage,i=this.notesLayer,r="speed"===e?"orange":"purple",s=6,n=new g.a.RegularPolygon({sides:3,radius:s,rotation:30,fill:r,x:this.editorWidth+s,y:O(t,this.isReverse),id:"speed-"+t});i.add(n),a.add(i)},t.prototype.clear=function(t){var e=this.stage,a=this.notesLayer,i=a.findOne("#speed-"+t);i.destroy(),e.add(a)},t}(),T=a("2ef0"),F=a.n(T),G=function(){function t(t,e,a,i){this.scoreData=t,this.copyScoreStore=e,this.keyNum=a,this.displayPageScore=i}return t.prototype.copy=function(t){var e=F.a.cloneDeep(this.scoreData.scores[t-1]);this.copyScoreStore=e},t.prototype.cut=function(t){this.copy(t),this.scoreData.scores.splice(t-1,1,new K(this.keyNum)),this.displayPageScore(t)},t.prototype.paste=function(t){var e=F.a.cloneDeep(this.copyScoreStore);this.scoreData.scores.splice(t-1,1,e),this.displayPageScore(t)},t.prototype.add=function(t){var e=F.a.cloneDeep(this.copyScoreStore);this.scoreData.scores.splice(t-1,0,e);var a=this.scoreData.timings;this.scoreData.timings=a.map((function(e){return e.label>t&&e.label++,e})),this.displayPageScore(t)},t.prototype.delete=function(t){this.copy(t),this.scoreData.scores.splice(t-1,1);var e=this.scoreData.timings;this.scoreData.timings=e.map((function(e){return e.label>t&&e.label--,e})),this.displayPageScore(t)},t}();function E(t,e,a,i){void 0===i&&(i=0);var r=60*w/k/t.bpm,s=i+t.startNum+(e-t.label)*D*r;return s+a*r}function I(t,e,a,i){return void 0===i&&(i=0),E(t,e,a,i)/w}function A(t){var e=Math.floor(t/60),a=Math.floor(t%60),i=a<10?"0"+a:""+a;return e+":"+i}var J=function(){function t(t,e,a,i,r,s){this.scoreData=t,this.editorWidth=e,this.isReverse=a,this.stage=i,this.currentPositionLayer=r,this.changeCurrentPosition=s}return t.prototype.draw=function(t,e,a){var i=this.stage,r=this.currentPositionLayer,s="#d8d800",n=O(t,this.isReverse),o=r.findOne("#currentPositionLine"),u=o instanceof g.a.Line?o.y(n):new g.a.Line({y:n,points:[0,0,this.editorWidth,0],stroke:s,strokeWidth:1.75,id:"currentPositionLine"}),c=6,d=r.findOne("#currentPositionTriangle"),l=d instanceof g.a.RegularPolygon?d.y(n):new g.a.RegularPolygon({sides:3,radius:c,rotation:-30,fill:s,x:-c,y:n,id:"currentPositionTriangle"}),f=this.scoreData.blankFrame,p=E(a,e,t,f)<1e5?Math.round(10*E(a,e,t,f))/10:Math.round(E(a,e,t,f)),m=I(a,e,t,f),h=A(m),y=p+"\n["+h+"]",v=40,_=22,K=r.findOne("#currentPositionText"),b=K instanceof g.a.Text?K.y(n-_/2).text(y):new g.a.Text({width:v,height:_,text:y,fill:"black",fontSize:_/2,align:"center",x:2-N,y:n-_/2,id:"currentPositionText"});r.add(u,l,b),i.add(r)},t.prototype.move=function(t,e,a){this.changeCurrentPosition(t),this.draw(t,e,a)},t.prototype.musicAnimate=function(t){var e=this.stage,a=this.currentPositionLayer,i=a.findOne("#musicPosition"),r=i instanceof g.a.Line?i.y(O(0,this.isReverse)):new g.a.Line({y:O(0,this.isReverse),points:[0,0,this.editorWidth,0],stroke:"#8000ff",strokeWidth:1.75,id:"musicPosition"});a.add(r),e.add(a);var s=new g.a.Tween({node:r,duration:4*t/5/1e3,x:0,y:O(S,this.isReverse)});setTimeout((function(){s.play()}),t/5)},t}(),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"editor-speed-piece",style:{top:t.top+"px"},attrs:{type:"number",step:"0.01"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}})},V=[],$=i["a"].extend({name:"SpeedPiece",model:{prop:"propValue",event:"changeSpeed"},props:{isReverse:Boolean,position:Number,propValue:Number,type:{type:String}},computed:{top:function(){return O(this.position,this.isReverse)+15},inputValue:{get:function(){return this.propValue},set:function(t){var e=Number(t);this.$emit("changeSpeed",e)}}}}),W=$,B=Object(u["a"])(W,j,V,!1,null,null,null),H=B.exports,X={5:{id:1,num:5,keys:["KeyJ","KeyK","KeyI","KeyL","KeyG"],chars:["J","K","I","L","G"],alternativeKeys:["KeyS","KeyD","KeyE","KeyF","KeyH"],noteNames:["left_data","down_data","up_data","right_data","space_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data"],colorGroup:[0,0,0,0,2]},7:{id:2,num:7,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL"],chars:["S","D","F","G","J","K","L"],alternativeKeys:["","","","KeyH","","",""],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data"],colorGroup:[0,1,0,2,0,1,0]},"7i":{id:3,num:7,keys:["KeyZ","KeyX","KeyC","KeyJ","KeyK","KeyI","KeyL"],chars:["Z","X","C","J","K","I","L"],alternativeKeys:["KeyS","KeyD","KeyF","","","KeyO",""],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data"],colorGroup:[1,1,1,0,0,0,0]},8:{id:4,num:8,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon"],chars:["S","D","F","G","J","K","L","+"],alternativeKeys:["","","","KeyH","","","",""],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data"],colorGroup:[0,1,0,2,0,1,0,2]},"9A":{id:5,num:9,keys:["KeyS","KeyD","KeyE","KeyF","KeyG","KeyJ","KeyK","KeyI","KeyL"],chars:["S","D","E","F","G","J","K","I","L"],alternativeKeys:["","","KeyR","","KeyH","","","KeyO",""],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,0,0,0,2,1,1,1,1]},"9B":{id:6,num:9,keys:["KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon"],chars:["A","S","D","F","G","J","K","L","+"],alternativeKeys:["","","","","KeyH","","","",""],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[1,0,1,0,2,0,1,0,1]},"9i":{id:7,num:9,keys:["KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyI","KeyL"],chars:["A","S","D","F","G","J","K","I","L"],alternativeKeys:["","","","","KeyH","","","KeyO",""],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[1,0,1,0,2,3,3,3,3]},11:{id:8,num:11,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","KeyU","KeyI","Digit8","KeyO"],alternativeKeys:["","","","KeyH","","","","","","Digit9",""],chars:["S","D","F","G","J","K","L","U","I","8","O"],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,1,0,2,0,1,0,3,3,3,3]},"11L":{id:9,num:11,keys:["KeyW","KeyE","Digit3","KeyR","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL"],chars:["W","E","3","R","S","D","F","G","J","K","L"],alternativeKeys:["","","Digit4","","","","","KeyH","","",""],noteNames:["sleft_data","sdown_data","sup_data","sright_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data"],freezeNames:["sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data"],colorGroup:[3,3,3,3,0,1,0,2,0,1,0]},"11W":{id:10,num:11,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Digit2","KeyT","KeyY","Digit0"],chars:["S","D","F","G","J","K","L","2","T","Y","0"],alternativeKeys:["","","","KeyH","","","","Digit1","","","Minus"],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,1,0,2,0,1,0,2,3,3,2]},"11i":{id:11,num:11,keys:["KeyS","KeyC","KeyD","KeyE","KeyF","KeyG","KeyJ","KeyM","KeyK","KeyI","KeyL"],chars:["S","C","D","E","F","G","J","M","K","I","L"],alternativeKeys:["","KeyX","","KeyR","","KeyH","","Comma","","KeyO",""],noteNames:["left_data","down_data","gor_data","up_data","right_data","space_data","sleft_data","sdown_data","siyo_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzGor_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzIyo_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,0,2,0,0,2,1,1,2,1,1]},12:{id:12,num:12,keys:["KeyG","KeyN","KeyJ","KeyM","KeyK","Comma","KeyL","Period","KeyU","KeyI","Digit8","KeyO"],chars:["G","N","J","M","K","<","L",">","U","I","8","O"],alternativeKeys:["KeyH","","","","","","","","","","Digit9",""],noteNames:["oni_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["foni_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[2,0,1,0,1,0,1,0,3,3,3,3]},13:{id:13,num:13,keys:["KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon","KeyU","KeyI","Digit8","KeyO"],chars:["A","S","D","F","G","J","K","L","+","U","I","8","O"],alternativeKeys:["","","","","KeyH","","","","","","","Digit9",""],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data","tleft_data","tdown_data","tup_data","tright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","tfrzLeft_data","tfrzDown_data","tfrzUp_data","tfrzRight_data"],colorGroup:[0,0,0,0,2,1,1,1,1,3,3,3,3]},14:{id:14,num:14,keys:["KeyG","KeyN","KeyJ","KeyM","KeyK","Comma","KeyL","Period","KeyY","KeyU","KeyI","Digit8","KeyO","KeyP"],chars:["G","N","J","M","K","<","L",">","Y","U","I","8","O","P"],alternativeKeys:["KeyH","","","","","","","","KeyT","","","Digit9","","BracketLeft"],noteNames:["oni_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleftdia_data","sleft_data","sdown_data","sup_data","sright_data","srightdia_data"],freezeNames:["foni_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLdia_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","sfrzRdia_data"],colorGroup:[2,0,1,0,1,0,1,0,2,3,3,3,3,2]},"14i":{id:15,num:14,keys:["KeyZ","KeyX","KeyC","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","KeyU","KeyI","Digit8","KeyO"],chars:["Z","X","C","S","D","F","G","J","K","L","U","I","8","O"],alternativeKeys:["","","","","","","KeyH","","","","","","Digit9",""],noteNames:["gor_data","space_data","iyo_data","sleft_data","sleftdia_data","sdown_data","sspace_data","sup_data","srightdia_data","sright_data","left_data","down_data","up_data","right_data"],freezeNames:["frzGor_data","frzSpace_data","frzIyo_data","sfrzLeft_data","sfrzLdia_data","sfrzDown_data","sfrzSpace_data","sfrzUp_data","sfrzRdia_data","sfrzRight_data","frzLeft_data","frzDown_data","frzUp_data","frzRight_data"],colorGroup:[2,2,2,0,1,0,2,0,1,0,3,3,3,3]},15:{id:16,num:15,keys:["KeyW","KeyE","Digit3","KeyR","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","KeyU","KeyI","Digit8","KeyO"],chars:["W","E","3","R","S","D","F","G","J","K","L","U","I","8","O"],alternativeKeys:["","","Digit4","","","","","KeyH","","","","","","Digit9",""],noteNames:["sleft_data","sdown_data","sup_data","sright_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","tleft_data","tdown_data","tup_data","tright_data"],freezeNames:["sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","tfrzLeft_data","tfrzDown_data","tfrzUp_data","tfrzRight_data"],colorGroup:[3,3,3,3,0,1,0,2,0,1,0,3,3,3,3]},"16i":{id:17,num:16,keys:["KeyZ","KeyX","KeyC","KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon","KeyU","KeyI","Digit8","KeyO"],chars:["Z","X","C","A","S","D","F","G","J","K","L","+","U","I","8","O"],alternativeKeys:["","","","","","","","KeyH","","","","","","","Digit9",""],noteNames:["gor_data","space_data","iyo_data","sleft_data","sdown_data","sup_data","sright_data","aspace_data","aleft_data","adown_data","aup_data","aright_data","left_data","down_data","up_data","right_data"],freezeNames:["frzGor_data","frzSpace_data","frzIyo_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","afrzSpace_data","afrzLeft_data","afrzDown_data","afrzUp_data","afrzRight_data","frzLeft_data","frzDown_data","frzUp_data","frzRight_data"],colorGroup:[2,2,2,1,0,1,0,2,0,1,0,1,3,3,3,3]},17:{id:18,num:17,keys:["KeyA","KeyZ","KeyS","KeyX","KeyD","KeyC","KeyF","KeyV","KeyG","KeyN","KeyJ","KeyM","KeyK","Comma","KeyL","Period","Semicolon"],chars:["A","Z","S","X","D","C","F","V","G","N","J","M","K","<","L",">","+"],alternativeKeys:["","","","","","","","","KeyH"],noteNames:["aleft_data","bleft_data","adown_data","bdown_data","aup_data","bup_data","aright_data","bright_data","space_data","cleft_data","dleft_data","cdown_data","ddown_data","cup_data","dup_data","cright_data","dright_data"],freezeNames:["afrzLeft_data","bfrzLeft_data","afrzDown_data","bfrzDown_data","afrzUp_data","bfrzUp_data","afrzRight_data","bfrzRight_data","frzSpace_data","cfrzLeft_data","dfrzLeft_data","cfrzDown_data","dfrzDown_data","cfrzUp_data","dfrzUp_data","cfrzRight_data","dfrzRight_data"],colorGroup:[0,1,0,1,0,1,0,1,2,1,0,1,0,1,0,1,0]}};function Z(){var t,e=localStorage.getItem("customKeyConfig");if(e){var a=JSON.parse(e);t=Object.assign(X,a)}else t=X;return t}var q=i["a"].extend({name:"EditorMain",props:{pageNum:Number,loadScoreData:{type:Object},loadMusicUrl:String,keyConfig:{type:Object},keyKind:{type:String},timing:{type:Object},propScoreNumber:Number,musicVolume:Number,musicRate:Number},components:{SpeedPiece:H},data:function(){var t,e=this.loadScoreData,a=Z(),i=this.keyKind,r=a[i].num,s=new Audio(this.loadMusicUrl),n=null!==(t=localStorage.getItem("isReverse"))&&void 0!==t?t:"false",o=JSON.parse(n);return{currentPosition:0,scoreData:e,divisor:24,page:1,keyNum:r,isReverse:o,editorWidth:b*a[i].num,musicService:new x(s),musicTimer:null,copyScoreStore:new K(r),currentPositionService:void 0}},methods:{baseLayerDraw:function(){var t=this.divisor,e=this.keyNum,a=this.editorWidth,i=this.stage,r=this.baseLayer,s=this.notesLayer,n=this.currentPositionLayer;r.destroyChildren();for(var o=0;o<e;o++){var u=(o+1)*b,c=this.keyConfig[this.keyKind].colorGroup,d=P[c[o]],l=new g.a.Rect({x:u-b,width:b,height:S,fill:d,strokeWidth:0});r.add(l);var f=new g.a.Line({points:[u,0,u,S],stroke:"#969696",strokeWidth:.5});r.add(f)}for(var p=0;p<D/t;p++){var m=(p+1)*t;f=new g.a.Line({points:[0,m,a,m],stroke:"#969696",strokeWidth:t*(p+1)%k==0?1:.5});r.add(f)}var h=new g.a.Rect({width:a,height:S,stroke:"black",strokeWidth:1});r.add(h);for(o=0;o<e;o++){u=(o+1)*b;var y=this.keyConfig[this.keyKind],v=(c=y.colorGroup,d=C[c[o]],y.chars);if(v){var _=v[o],K=new g.a.Text({x:u-b,y:S+5,width:b,align:"center",verticalAlign:"middle",text:_,fontSize:11,fill:d});r.add(K)}}i.add(r),i.add(s),i.add(n)},playMusicLoop:function(t){var e=this,a=-D/4,i=D,r=I(t,this.page,a),s=I(t,this.page,i),n=this.musicVolume,o=this.musicRate,u=function(t,a){var i=1e3*(a-t)/o;if(e.musicService.play(t,n,o),e.currentPositionService.musicAnimate(i),e.musicTimer){var r=setTimeout((function(){e.musicService.pause(),u(t,a)}),i);e.musicTimer=r}};this.musicTimer=1,u(r,s)},stopMusicLoop:function(t){var e=this.stage,a=this.currentPositionLayer,i=a.findOne("#musicPosition");i.destroy(),e.add(a),this.musicService.pause(t),this.musicTimer=null},displayPageScore:function(t){var e=this.stage,a=this.notesLayer,i=this.noteService,r=this.speedPieceService,s=this.scoreData.scores[t-1];a.destroyChildren(),e.add(a),s.notes.forEach((function(t,e){t.forEach((function(t){i.draw(e,t,!1)}))})),s.freezes.forEach((function(t,e){t.forEach((function(t){i.draw(e,t,!0)}))})),s.speeds.forEach((function(t){r.draw(t.position,t.type)}))},pageMove:function(t){var e=this;this.page=t,this.scoreData.scores[t]||(this.scoreData.scores.length=t+1),this.scoreData.scores=Object(v["a"])(this.scoreData.scores).map((function(t){return t||new K(e.keyNum)})),this.displayPageScore(t),this.musicTimer&&(this.stopMusicLoop(this.musicTimer),this.playMusicLoop(this.timing)),this.currentPositionService.draw(this.currentPosition,t,this.timing)},pageMinus:function(t,e){void 0===e&&(e=0),this.$emit("page-minus",t),this.currentPositionService.move(e,this.page,this.timing)},pagePlus:function(t){this.$emit("page-plus",t),this.currentPositionService.move(0,this.page,this.timing)},changeDivisor:function(t){this.divisor=t,this.currentPosition%t!==0&&this.currentPositionService.move(Math.floor(this.currentPosition/t)*t,this.page,this.timing),this.baseLayerDraw()},currentPositionIncrease:function(){this.currentPosition+=this.divisor,this.currentPosition>=D?this.pagePlus(1):this.currentPositionService.move(this.currentPosition,this.page,this.timing)},currentPositionDecrese:function(){this.currentPosition-=this.divisor,this.currentPosition<0?1===this.page?this.currentPosition=0:this.pageMinus(1,this.currentPosition+D):this.currentPositionService.move(this.currentPosition,this.page,this.timing)},keydownAction:function(t){var e=this,a=this.noteService,i=this.speedPieceService,r=this.pageScoreService,s=this.page,n=this.currentPosition,o=this.divisor,u=function(t){return t===e.isReverse?e.currentPositionDecrese:e.currentPositionIncrease};if(t.ctrlKey)switch(t.code){case"Digit1":this.changeDivisor(k);break;case"Digit2":this.changeDivisor(k/2);break;case"Digit3":this.changeDivisor(k/4);break;case"Digit4":this.changeDivisor(k/3);break;case"Digit5":this.changeDivisor(k/6);break;case"Digit6":this.changeDivisor(k/12);break;case"Digit7":this.changeDivisor(k/8);break;case"KeyX":t.shiftKey?r.delete(s):r.cut(s);break;case"KeyC":r.copy(s);break;case"KeyV":t.shiftKey&&r.add(s),r.paste(s);break;case"ArrowUp":var c=this.isReverse?-o:o;a.shift(s,n,c),u(!0)(),this.displayPageScore(this.page);break;case"ArrowDown":c=this.isReverse?o:-o;a.shift(s,n,c),u(!1)(),this.displayPageScore(this.page);break}else switch(t.code){case"Enter":if(this.musicTimer){var d=this.musicTimer;this.stopMusicLoop(d)}else{var l=this.timing;this.playMusicLoop(l)}break;case"Backspace":a.removeOnPosition(this.page,this.currentPosition),this.displayPageScore(this.page);break;case"Space":u(!0)();break;case"ArrowUp":u(!0)();break;case"KeyB":u(!1)();break;case"ArrowDown":u(!1)();break;case"ArrowLeft":t.shiftKey?this.pageMinus(5):this.pageMinus(1);break;case"ArrowRight":t.shiftKey?this.pagePlus(5):this.pagePlus(1);break;case"Quote":var f=t.shiftKey?"boost":"speed",p=this.page,m=this.currentPosition;i.hasSpeedPiece(p,m)?(i.remove(p,m),i.clear(m)):(i.add(p,m,f),i.draw(m,f));break;default:var h=Math.max(this.keyConfig[this.keyKind].keys.indexOf(t.code),this.keyConfig[this.keyKind].alternativeKeys.indexOf(t.code)),y=t.shiftKey,v=this.page;m=this.currentPosition;h>=0&&(a.hasNote(v,h,m).exists?(a.remove(v,h,m),a.clear(h,m)):(a.add(v,h,m,y),a.draw(h,m,y)),this.currentPositionIncrease());break}}},mounted:function(){var t=this,e=new g.a.Stage({x:N,y:L,container:"canvas",width:this.editorWidth+2*N,height:S+2*L}),a=new g.a.Layer({container:"baseLayer"}),i=new g.a.Layer({container:"currentPositionLayer"}),r=new g.a.Layer({container:"notesLayer"});this.stage=e,this.baseLayer=a,this.currentPositionLayer=i,this.notesLayer=r,this.noteService=new M(this.scoreData,this.keyConfig,this.keyKind,this.isReverse,this.stage,this.notesLayer),this.speedPieceService=new U(this.scoreData,this.editorWidth,this.isReverse,this.stage,this.notesLayer),this.pageScoreService=new G(this.scoreData,this.copyScoreStore,this.keyNum,this.displayPageScore),this.currentPositionService=new J(this.scoreData,this.editorWidth,this.isReverse,this.stage,this.currentPositionLayer,(function(e){return t.currentPosition=e})),this.baseLayerDraw(),this.currentPositionService.draw(0,1,this.timing),this.pageMove(1),this.displayPageScore(1)},watch:{pageNum:function(t){this.pageMove(t)},scoreData:function(t){this.$emit("changeScoreData",t)},propScoreNumber:function(t){this.scoreData.scoreNumber=t}}}),Q=q,Y=Object(u["a"])(Q,h,y,!1,null,null,null),tt=Y.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uk-modal-dialog",attrs:{id:"editor-option","uk-modal":"",container:"#editor-controller"}},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),a("h2",{staticClass:"uk-modal-title"},[t._v("Option Settings")]),a("div",{staticClass:"option-item-container",attrs:{id:"option-score-number"}},[a("div",{staticClass:"menu-txt"},[t._v("Score No.")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inputScoreNumber,expression:"inputScoreNumber",modifiers:{number:!0}}],staticClass:"uk-input uk-form-small",attrs:{type:"number",min:"1"},domProps:{value:t.inputScoreNumber},on:{input:function(e){e.target.composing||(t.inputScoreNumber=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"option-item-container",attrs:{id:"option-music-volume"}},[a("div",{staticClass:"menu-txt"},[t._v("Music Volume")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inputMusicVolume,expression:"inputMusicVolume",modifiers:{number:!0}}],staticClass:"uk-range uk-form-small",attrs:{type:"range",min:"0",max:"1",step:"0.05"},domProps:{value:t.inputMusicVolume},on:{__r:function(e){t.inputMusicVolume=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"option-item-container",attrs:{id:"option-music-rate"}},[a("div",{staticClass:"menu-txt"},[t._v("Music Speed")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inputMusicRate,expression:"inputMusicRate",modifiers:{number:!0}}],staticClass:"uk-input uk-form-small",attrs:{type:"number",min:"0.25",max:"2",step:"0.05"},domProps:{value:t.inputMusicRate},on:{input:function(e){e.target.composing||(t.inputMusicRate=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])},at=[],it=i["a"].extend({name:"EditorOption",props:{scoreNumber:Number,musicVolume:Number,musicRate:Number},computed:{inputScoreNumber:{get:function(){return this.scoreNumber},set:function(t){var e=Number(t);this.$emit("update:scoreNumber",e)}},inputMusicVolume:{get:function(){return this.musicVolume},set:function(t){var e=Number(t);this.$emit("update:musicVolume",e)}},inputMusicRate:{get:function(){return this.musicRate},set:function(t){var e=Number(t);this.$emit("update:musicRate",e)}}}}),rt=it,st=Object(u["a"])(rt,et,at,!1,null,null,null),nt=st.exports,ot=function(){function t(t){this.blankFrame=200,this.timings=[{label:1,startNum:0,bpm:140}],this.scoreNumber=1,this.scores=[new K(t)]}return t}(),ut=function(){function t(t,e){this.keyKind=t,this.keyConfig=e,this.keyNum=this.keyConfig[this.keyKind].num,this.defaultPageScore=new K(this.keyNum)}return t.prototype.toFrameData=function(t){for(var e=new K(this.keyNum),a=t.blankFrame,i=t.timings.sort((function(t,e){return t.label-e.label})),r=t.scores,s=0,n=r.length+1,o=[],u=function(t){var n=r[t-1];if(void 0===n)o.push(e);else{i[s]&&t===i[s].label&&s++;var u=i[s-1],c=function(e){return Math.round(E(u,t,e,a))},d=n.notes.map((function(t){return t.sort((function(t,e){return t-e})).map(c)})),l=n.freezes.map((function(t){return t.sort((function(t,e){return t-e})).map(c)})),f=n.speeds.map((function(t){var e=F.a.cloneDeep(t);return e.position=c(t.position),e}));o.push({notes:d,freezes:l,speeds:f})}},c=1;c<n;c++)u(c);return o},t.prototype.framesToOutputData=function(t){var e=this,a={notes:new Array(this.keyNum).fill([]).map((function(){return[]})),freezes:new Array(this.keyNum).fill([]).map((function(){return[]})),speeds:[],boosts:[]},i=t.reduce((function(t,a){for(var i=0;i<e.keyNum;i++)t.notes[i]=t.notes[i].concat(a.notes[i]),t.freezes[i]=t.freezes[i].concat(a.freezes[i]);return t.speeds=t.speeds.concat(a.speeds.filter((function(t){return"speed"===t.type}))),t.boosts=t.boosts.concat(a.speeds.filter((function(t){return"boost"===t.type}))),t}),a);return i},t.prototype.convert=function(t,e){var a=this;void 0===e&&(e="");var i=this.toFrameData(t),r=this.framesToOutputData(i);r.speeds.sort((function(t,e){return t.position-e.position})),r.boosts.sort((function(t,e){return t.position-e.position}));var s=r.notes.reduce((function(t,e,i){return""+t+a.keyConfig[a.keyKind].noteNames[i]+"="+e.join(",")+"|"}),"|"),n=r.freezes.reduce((function(t,e,i){return""+t+a.keyConfig[a.keyKind].freezeNames[i]+"="+e.join(",")+"|"}),""),o="speed_data="+r.speeds.map((function(t){return t.position+","+t.value})).join(",")+"|",u="boost_data="+r.boosts.map((function(t){return t.position+","+t.value})).join(",")+"|";return("\n"+(s+n)+"\n|"+(o+u)).replace(/_/g,e+"_")},t.prototype.cutLastDefault=function(t){var e=t.scores.length,a=F.a.cloneDeep(t),i=e-1;while(i>=0){if(!F.a.isEqual(a.scores[i],this.defaultPageScore))break;a.scores.pop(),i--}return a},t.prototype.convertWithQuarters=function(t,e){void 0===e&&(e="");for(var a=[],i=0;i<8;i++)a.push(i*k);var r=20,s=0,n=this.cutLastDefault(F.a.cloneDeep(t));for(i=0;i<r;i++){var o=new K(this.keyNum);o.notes[s]=a,n.scores.push(o)}return this.convert(this.cutLastDefault(n),e)},t.prototype.save=function(t){return JSON.stringify(this.cutLastDefault(t))},t}(),ct=function(){function t(){}return t.prototype.calcFlattenData=function(t,e){var a={allScorebook:[],frzStartData:[],frzEndData:[]};return e.forEach((function(t){a.frzStartData=a.frzStartData.concat(t.filter((function(t,e){return e%2==0}))),a.frzEndData=a.frzEndData.concat(t.filter((function(t,e){return e%2==1})))})),a.frzStartData.sort((function(t,e){return t-e})),a.frzEndData.sort((function(t,e){return t-e})),a.allScorebook=F.a.flattenDeep(t.concat(a.frzStartData)).sort((function(t,e){return t-e})),a},t.prototype.calcLaneContinuous=function(t,e){for(var a=t.length,i=0,r=function(a){var r=t[a].concat(e[a].filter((function(t,e){return e%2==0}))).sort((function(t,e){return t-e}));i+=r.reduce((function(t,e,a){var i=10,s=0!==a?e-r[a-1]:i,n=s<i?i/Math.pow(s,2)-1/i:0;return t+n}),0)},s=0;s<a;s++)r(s);return i},t.prototype.calcAdjustValue=function(t){var e=F.a.cloneDeep(t),a=e.allScorebook,i=e.frzStartData,r=e.frzEndData;a.unshift(a[0]-100),a.push(a[a.length-1]+100);var s=0,n=F.a.uniq(a),o={level:0,single:0,double:0,overTriple:0,overTripleFrame:[],laneContinuous:0};return n.forEach((function(t,e){var u=n[e+1],c=r.filter((function(e){return e<t})).length;if(s-=c,r.splice(0,c),e!==n.length-1&&0!==e){var d=a.filter((function(e){return e===t})).length;if(d+s>2&&(o.overTriple+=Math.min(d,d+s-2),o.overTripleFrame.push(t)),d>=2&&0===s){var l=40/((t-n[e-1])*(u-t));o.double+=l}var f=i.filter((function(e){return e===t})).length;s+=f,i.splice(0,f);var p=r.filter((function(t){return t<u})).length;if(s-=p,r.splice(0,p),s<2){var m=2/((2-s)*(u-t));o.single+=m}}})),o},t.prototype.calcLevel=function(t,e){var a=this.calcFlattenData(t,e),i=this.calcLaneContinuous(t,e),r=this.calcAdjustValue(a);r.laneContinuous=i;var s=a.allScorebook.length;if(0===s)return r;if(1===s)return Object.assign(r,{level:.01});var n=function(t){return t/Math.sqrt(s-1-r.overTriple)*4},o=n(r.single+r.double+r.laneContinuous);r.single=n(r.single),r.double=n(r.double),r.laneContinuous=n(r.laneContinuous);var u=o*(s-1)/(s-1-r.overTriple),c=Math.round(100*u)/100;return Object.assign(r,{level:c})},t.prototype.countNotes=function(t,e){var a=t.map((function(t){return t.length})),i=e.map((function(t){return t.length/2}));return{notesCountArr:a,freezesCountArr:i}},t.prototype.createScoreDataInfoStr=function(t,e){var a=this.calcLevel(t,e),i="ツール値: "+a.level+(a.overTriple>0?"*":""),r="同時補正: "+a.double,s="縦連補正: "+a.laneContinuous,n=this.countNotes(t,e),o=F.a.sum(n.notesCountArr),u=F.a.sum(n.freezesCountArr),c="矢印数: "+(o+u)+"("+o+" + "+u+")",d="通常ノーツ: ("+n.notesCountArr.join("/")+")",l="氷矢: ("+n.freezesCountArr.join("/")+")",f="3押し位置: ("+a.overTripleFrame.join("/")+")",p=i+"\n"+r+"\n"+s+"\n"+c+"\n"+d+"\n"+l+"\n"+f;return p},t}(),dt=i["a"].extend({name:"EditorController",components:{EditorMain:tt,EditorOption:nt},props:{selectedKey:String,loadScoreDataStr:String,loadMusicUrl:String},data:function(){var t,e=Z(),a=sessionStorage.getItem("keyKind"),i=a||this.selectedKey,r=e[i].num;try{t=this.loadScoreDataStr?JSON.parse(this.loadScoreDataStr):new ot(r)}catch(n){alert("不正な譜面データが与えられたため、正しく読み込めませんでした。"),t=new ot(r)}var s=t.keyKind||i;return t.keyKind=s,sessionStorage.setItem("keyKind",s),{pageNum:1,labelNum:1,timing:t.timings[0],scoreData:t,keyKind:s,keyConfig:e,scoreNumber:t.scoreNumber?t.scoreNumber:1,musicVolume:1,musicRate:1,scoreConvertService:new ut(s,e)}},methods:{pageMinus:function(t){this.pageNum=Math.max(1,this.pageNum-t)},pagePlus:function(t){this.pageNum+=t},labelMinus:function(t){this.labelNum=Math.max(1,this.labelNum-t),this.labelMove(this.labelNum),this.pageNum=this.scoreData.timings[this.labelNum-1].label},labelPlus:function(t){this.labelNum=Math.min(this.scoreData.timings.length,this.labelNum+t),this.labelMove(this.labelNum),this.pageNum=this.scoreData.timings[this.labelNum-1].label},labelMove:function(t){var e=this.scoreData.timings[t-1];this.labelNum=t,this.timing=e},changeScoreData:function(t){this.scoreData=t},writeClipBoard:function(t,e){navigator.clipboard&&(navigator.clipboard.writeText(t),alert(e))},convert:function(){var t=1!==this.scoreData.scoreNumber&&this.scoreData.scoreNumber?this.scoreData.scoreNumber.toString():"",e=this.scoreConvertService,a=e.convert(this.scoreData,t),i="譜面データをクリップボードにコピーしました！";this.writeClipBoard(a,i),localStorage.setItem("saveData",e.save(this.scoreData))},save:function(){var t=this.scoreConvertService,e=t.save(this.scoreData),a="セーブデータをクリップボードにコピーしました！";this.writeClipBoard(e,a)},convertWithQuarters:function(){var t=1!==this.scoreData.scoreNumber&&this.scoreData.scoreNumber?this.scoreData.scoreNumber.toString():"",e=this.scoreConvertService,a=e.convertWithQuarters(this.scoreData,t),i="四分譜面データをクリップボードにコピーしました！";this.writeClipBoard(a,i)},displayScoreDataInfo:function(){var t=new ct,e=this.scoreConvertService.toFrameData(this.scoreData),a=this.scoreConvertService.framesToOutputData(e),i=t.createScoreDataInfoStr(a.notes,a.freezes);alert(i)},getLabelNumByPageNum:function(t){var e=this.scoreData.timings.map((function(t){return t.label}));return e.indexOf(t)},getNearestLabelNumByPageNum:function(t){var e=this.scoreData.timings.map((function(t){return t.label})),a=e.reduce((function(e,a){return a<=t?e+1:e}),0);return a},labelOperation:function(t,e){if(e){var a=this.getLabelNumByPageNum(t);this.scoreData.timings.splice(a,1),this.labelNum--,this.timing=this.scoreData.timings[this.labelNum-1]}else{var i=this.timing,r=60*w/k/i.bpm,s=Math.round(100*(i.startNum+(t-i.label)*D*r))/100,n={label:t,startNum:s,bpm:i.bpm};this.scoreData.timings.splice(this.labelNum,0,n),this.timing=n,this.labelNum++}},callLabelOperation:function(){var t=this.pageNum,e=-1!==this.getLabelNumByPageNum(t);this.labelOperation(t,e),this.pageNum=t}},watch:{pageNum:function(t){var e=this.getNearestLabelNumByPageNum(t);this.labelNum=e,this.labelMove(e)}},mounted:function(){this.scoreData.scoreNumber||(this.scoreData.scoreNumber=1)}}),lt=dt,ft=Object(u["a"])(lt,p,m,!1,null,null,null),pt=ft.exports,mt=i["a"].extend({name:"Editor",components:{EditorController:pt},props:{loadScoreDataStr:String,loadMusicUrl:String,selectedKey:String},beforeRouteLeave:function(t,e,a){var i=window.confirm("内容が消去されますがよろしいですか？");i?a():a(!1)},methods:{beforeunloadAlert:function(t){t.returnValue="内容が消去されますがよろしいですか？"}},created:function(){window.addEventListener("beforeunload",this.beforeunloadAlert)},destroyed:function(){window.removeEventListener("beforeunload",this.beforeunloadAlert)}}),ht=mt,yt=Object(u["a"])(ht,l,f,!1,null,null,null),vt=yt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"start"}},[a("start-main")],1)},gt=[],Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"start-container"}},[a("div",{attrs:{id:"start-title"}},[t._v("Dancing☆Onigiri Editor")]),a("div",{attrs:{id:"start-menu"}},[a("start-uploader",{attrs:{msg:t.musicTitle},on:{fileRecieve:t.onMusicFileRecieve}}),a("start-uploader",{attrs:{msg:t.scoreTitle},on:{fileRecieve:t.onScoreFileRecieve}}),a("div",{attrs:{id:"start-go-next"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedKey,expression:"selectedKey"}],staticClass:"uk-select uk-form-width-medium",attrs:{id:"start-key-selector"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedKey=e.target.multiple?a:a[0]}}},t._l(t.keyKinds,(function(e){return a("option",{key:e},[t._v(t._s(e))])})),0),a("router-link",{staticClass:"start-btn btn-orange",attrs:{to:{name:"configure",path:"configure"}}},[t._v("CONFIG")]),a("router-link",{staticClass:"start-btn btn-blue",attrs:{to:{name:"editor",path:"editor",params:{scoreData:t.localSaveDataStr,musicUrl:t.musicUrl,key:t.selectedKey}}}},[t._v("REVIVAL")]),a("router-link",{staticClass:"start-btn btn-red",attrs:{to:{name:"editor",path:"editor",params:{scoreData:t.scoreDataStr,musicUrl:t.musicUrl,key:t.selectedKey}}}},[t._v("START")])],1),a("div",{attrs:{id:"start-version"}},[t._v("ver 2.7.1 created by SKB")])],1)])},bt=[],zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"start-uploader",on:{dragover:function(e){return e.preventDefault(),t.ondragover(e)},drop:function(e){return e.preventDefault(),t.ondrop(e)}}},[a("div",{staticClass:"uk-placeholder uk-text-center uk-margin-remove-bottom start-droparea",attrs:{"uk-form-custom":""}},[a("input",{ref:"input",attrs:{type:"file"},on:{change:t.loadFile}}),a("span",{attrs:{"uk-icon":"icon: upload"}}),a("span",{staticClass:"uk-text-middle"},[t._v(" "+t._s(t.msg)+" ")]),a("span",{staticClass:"uk-text-middle uk-link"},[t._v("参照")])])])},Dt=[],St=i["a"].extend({name:"StartUploader",props:{msg:String},data:function(){return{vue:this,file:null}},methods:{ondragover:function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="copy")},ondrop:function(t){if(t.dataTransfer){var e=t.dataTransfer.files[0]||null;this.file=e}else this.file=null},loadFile:function(t){if(t.target instanceof HTMLInputElement){var e=t.target.files?t.target.files[0]:null;this.file=e}else this.file=null}},watch:{file:function(t){null!==t?this.$emit("fileRecieve",t):alert("ファイルが見つかりませんでした。")}}}),kt=St,wt=Object(u["a"])(kt,zt,Dt,!1,null,null,null),Nt=wt.exports,Lt=i["a"].extend({name:"StartMain",components:{StartUploader:Nt},data:function(){var t=Z();return{keyConfig:t,musicTitle:"楽曲ファイルをドロップ",scoreTitle:"セーブファイルをドロップ",selectedKey:"5",musicUrl:null,scoreDataStr:null}},computed:{keyKinds:function(){var t=this.keyConfig,e=Object.keys(t);return e.sort((function(e,a){return t[e].id-t[a].id})),e},localSaveDataStr:function(){var t;return null!==(t=localStorage.getItem("saveData"))&&void 0!==t?t:""}},methods:{onMusicFileRecieve:function(t){var e=this,a="audio.*";if(t.type.match(a)){var i=new FileReader;i.onload=function(){var a=i.result;"string"==typeof a&&(e.musicUrl=a,e.musicTitle=t.name)},i.readAsDataURL(t)}else alert("音楽ファイルではありません。")},onScoreFileRecieve:function(t){var e=this,a="(application/json|text/plain)";if(t.type.match(a)){var i=new FileReader;i.onload=function(){var a=i.result;"string"==typeof a&&(e.scoreDataStr=a,e.scoreTitle=t.name)},i.readAsText(t)}else alert("譜面ファイルではありません。")}},mounted:function(){sessionStorage.removeItem("keyKind")}}),Ct=Lt,Rt=Object(u["a"])(Ct,Kt,bt,!1,null,null,null),Pt=Rt.exports,xt=i["a"].extend({name:"Start",components:{StartMain:Pt}}),Ot=xt,Mt=Object(u["a"])(Ot,_t,gt,!1,null,null,null),Ut=Mt.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"configure"}},[a("configure-main")],1)},Ft=[],Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"configure-container"}},[t._m(0),a("h3",{staticClass:"configure-context-title"},[t._v("Key Config")]),a("div",{attrs:{id:"configure-uploader"}},[a("configure-uploader",{attrs:{msg:t.confTitle},on:{fileRecieve:t.onConfFileRecieve}}),a("div",{staticClass:"start-btn btn-gray",on:{click:t.resetConf}},[t._v("RESET")])],1),a("configure-design"),a("div",{attrs:{id:"start-go-next"}},[a("router-link",{staticClass:"start-btn btn-blue",attrs:{to:{name:"start",path:"/"}}},[t._v("BACK")])],1)],1)},Et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"configure-title"}},[a("h2",[t._v("Configure")])])}],It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"configure-conf-select"},on:{dragover:function(e){return e.preventDefault(),t.ondragover(e)},drop:function(e){return e.preventDefault(),t.ondrop(e)}}},[a("div",{staticClass:"uk-placeholder uk-text-center uk-margin-remove-bottom uk-form-width-medium",attrs:{"uk-form-custom":"",id:"configure-droparea"}},[a("input",{ref:"input",attrs:{type:"file",id:"configure-droparea-input"},on:{change:t.loadFile}}),a("div",{attrs:{id:"configure-droparea-text"}},[a("span",{attrs:{"uk-icon":"icon: upload"}}),a("span",{staticClass:"uk-text-middle"},[t._v(t._s(t.msg))]),a("span",{staticClass:"uk-text-middle uk-link"},[t._v("参照")])])])])},At=[],Jt=i["a"].extend({name:"ConfigureUploader",props:{msg:String},data:function(){return{vue:this,file:null}},methods:{ondragover:function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="copy")},ondrop:function(t){if(t.dataTransfer){var e=t.dataTransfer.files[0]||null;this.file=e}else this.file=null},loadFile:function(t){if(t.target instanceof HTMLInputElement){var e=t.target.files?t.target.files[0]:null;this.file=e}else this.file=null}},watch:{file:function(t){null!==t?this.$emit("fileRecieve",t):alert("ファイルが見つかりませんでした。")}}}),jt=Jt,Vt=Object(u["a"])(jt,It,At,!1,null,null,null),$t=Vt.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"configure-context-title"},[t._v("Design")]),a("div",{staticClass:"configure-design-item"},[a("div",{staticClass:"configure-design-text"},[t._v("Direction:")]),a("div",[a("label",{staticClass:"configure-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isReverse,expression:"isReverse"}],staticClass:"uk-radio",attrs:{type:"radio",name:"editor-direction"},domProps:{value:!1,checked:t._q(t.isReverse,!1)},on:{change:function(e){t.isReverse=!1}}}),t._v("Upward ")]),a("label",{staticClass:"configure-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isReverse,expression:"isReverse"}],staticClass:"uk-radio",attrs:{type:"radio",name:"editor-direction"},domProps:{value:!0,checked:t._q(t.isReverse,!0)},on:{change:function(e){t.isReverse=!0}}}),t._v("Downward ")])])])])},Bt=[],Ht=i["a"].extend({name:"ConfigureDesign",computed:{isReverse:{get:function(){var t,e=null!==(t=localStorage.getItem("isReverse"))&&void 0!==t?t:"false";return JSON.parse(e)},set:function(t){return localStorage.setItem("isReverse",JSON.stringify(t)),t}}}}),Xt=Ht,Zt=Object(u["a"])(Xt,Wt,Bt,!1,null,null,null),qt=Zt.exports,Qt=i["a"].extend({name:"ConfigureMain",components:{ConfigureUploader:$t,ConfigureDesign:qt},data:function(){return{confTitle:"ファイルをドロップ"}},methods:{onConfFileRecieve:function(t){var e=localStorage,a="(application/json|text/plain)";if(t.type.match(a)){var i=new FileReader;i.onload=function(){var t=i.result;if("string"==typeof t)try{JSON.parse(t),e.setItem("customKeyConfig",t),alert("コンフィグファイルをインポートしました。")}catch(a){alert("内容がJSON形式になっていません。")}},i.readAsText(t)}else alert("コンフィグファイルではありません。")},resetConf:function(){var t=localStorage;t.removeItem("customKeyConfig"),alert("キー設定をリセットしました。")}}}),Yt=Qt,te=Object(u["a"])(Yt,Gt,Et,!1,null,null,null),ee=te.exports,ae=i["a"].extend({name:"Configure",components:{ConfigureMain:ee}}),ie=ae,re=Object(u["a"])(ie,Tt,Ft,!1,null,null,null),se=re.exports,ne=a("8c4f");i["a"].config.productionTip=!1,i["a"].use(ne["a"]);var oe=new ne["a"]({routes:[{path:"/",name:"start",component:Ut},{path:"/editor",name:"editor",component:vt,props:function(t){return{loadScoreDataStr:t.params.scoreData,loadMusicUrl:t.params.musicUrl,selectedKey:t.params.key||"7"}}},{path:"/configure",name:"configure",component:se}]}),ue=a("8323"),ce=a.n(ue),de=a("263c"),le=a.n(de);a("30b0"),a("d0e7");ce.a.use(le.a),i["a"].config.productionTip=!1,new i["a"]({router:oe,render:function(t){return t(d)}}).$mount("#app")}});
//# sourceMappingURL=app.ed564b71.js.map