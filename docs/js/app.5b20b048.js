(function(t){function a(a){for(var r,s,o=a[0],d=a[1],f=a[2],c=0,l=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&l.push(i[s][0]),i[s]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(t[r]=d[r]);u&&u(a);while(l.length)l.shift()();return n.push.apply(n,f||[]),e()}function e(){for(var t,a=0;a<n.length;a++){for(var e=n[a],r=!0,o=1;o<e.length;o++){var d=e[o];0!==i[d]&&(r=!1)}r&&(n.splice(a--,1),t=s(s.s=e[0]))}return t}var r={},i={app:0},n=[];function s(a){if(r[a])return r[a].exports;var e=r[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=r,s.d=function(t,a,e){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)s.d(e,r,function(a){return t[a]}.bind(null,r));return e},s.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=a,o=o.slice();for(var f=0;f<o.length;f++)a(o[f]);var u=d;n.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("cd49")},cd49:function(t,a,e){"use strict";e.r(a);var r=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("router-view")],1)},n=[],s=r["a"].extend({name:"App"}),o=s,d=e("2877"),f=Object(d["a"])(o,i,n,!1,null,null,null),u=f.exports,c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"editor"}},[e("editor-controller",{attrs:{"selected-key":t.selectedKey,"load-score-data-str":t.loadScoreDataStr,"load-music-url":t.loadMusicUrl}})],1)},l=[],_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"editor-controller"}},[e("editor-main",{attrs:{"page-num":t.pageNum,"load-score-data":t.scoreData,"selected-key":t.keyKind},on:{"page-minus":t.pageMinus,"page-plus":t.pagePlus}}),e("div",{attrs:{id:"editor-menu"}},[e("div",{staticClass:"menu-item-container",attrs:{id:"menu-page"}},[e("div",{staticClass:"menu-txt"},[t._v("Page")]),e("div",{staticClass:"menu-move-display"},[e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.pageMinus(5)}}},[t._v("◁")]),e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.pageMinus(1)}}},[t._v("◁")]),e("div",{staticClass:"menu-move-txt"},[t._v(t._s(t.pageNum))]),e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.pagePlus(1)}}},[t._v("▷")]),e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.pagePlus(5)}}},[t._v("▷")])])]),e("div",{staticClass:"menu-item-container",attrs:{id:"menu-label"}},[e("div",{attrs:{id:"menu-move-header"}},[e("div",{staticClass:"menu-txt"},[t._v("Label")]),e("input",{ref:"label-checkbox",staticClass:"uk-checkbox",attrs:{id:"menu-label-checkbox",type:"checkbox",disabled:1===t.pageNum},domProps:{checked:-1!==t.getLabelNumByPageNum(t.pageNum)},on:{click:t.callLabelOperation}})]),e("div",{staticClass:"menu-move-display"},[e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.labelMinus(5)}}},[t._v("◁")]),e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.labelMinus(1)}}},[t._v("◁")]),e("div",{staticClass:"menu-move-txt"},[t._v(t._s(t.labelNum))]),e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.labelPlus(1)}}},[t._v("▷")]),e("div",{staticClass:"menu-move-btn",on:{click:function(a){return t.labelPlus(5)}}},[t._v("▷")])])]),e("div",{staticClass:"menu-item-container",attrs:{id:"menu-fn"}},[e("div",{staticClass:"menu-txt"},[t._v("First Number")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.timing.firstNum,expression:"timing.firstNum"}],staticClass:"uk-input uk-form-small",attrs:{type:"number"},domProps:{value:t.timing.firstNum},on:{input:function(a){a.target.composing||t.$set(t.timing,"firstNum",a.target.value)}}})]),e("div",{staticClass:"menu-item-container",attrs:{id:"menu-bpm"}},[e("div",{staticClass:"menu-txt"},[t._v("BPM")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.timing.bpm,expression:"timing.bpm"}],staticClass:"uk-input uk-form-small",attrs:{type:"number"},domProps:{value:t.timing.bpm},on:{input:function(a){a.target.composing||t.$set(t.timing,"bpm",a.target.value)}}})]),e("div",{staticClass:"menu-item-container",attrs:{id:"menu-output"}},[e("div",{staticClass:"menu-output-btn btn-red",on:{click:t.convert}},[t._v("GO")]),e("div",{staticClass:"menu-output-btn btn-blue",on:{click:t.save}},[t._v("SAVE")])])])],1)},h=[],p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"canvas",attrs:{id:"canvas",tabindex:"-1"},on:{keydown:function(a){return a.preventDefault(),t.keydownAction(a)}}})},y=[],m=e("362d"),g=e.n(m),z={5:{id:1,num:5,keys:["KeyJ","KeyK","KeyI","KeyL","KeyF"],noteNames:["left_data","down_data","up_data","right_data","space_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data"],colorGroup:[0,0,0,0,2]},7:{id:2,num:7,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL"],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data"],colorGroup:[0,1,0,2,0,1,0]},"7i":{id:3,num:7,keys:["KeyS","KeyD","KeyF","KeyJ","KeyK","KeyI","KeyL"],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data"],colorGroup:[1,1,1,0,0,0,0]},8:{id:4,num:8,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon"],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data"],colorGroup:[0,1,0,2,0,1,0,2]},"9A":{id:5,num:9,keys:["KeyS","KeyD","KeyE","KeyF","KeyG","KeyJ","KeyK","KeyI","KeyL"],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,0,0,0,2,1,1,1,1]},"9B":{id:6,num:9,keys:["KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon"],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[1,0,1,0,2,0,1,0,1]},"9i":{id:7,num:9,keys:["KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyI","KeyL"],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[1,0,1,0,2,3,3,3,3]},11:{id:8,num:11,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","KeyU","KeyI","Digit8","KeyO"],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,1,0,2,0,1,0,3,3,3,3]},"11L":{id:9,num:11,keys:["KeyW","KeyE","Digit3","KeyR","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL"],noteNames:["sleft_data","sdown_data","sup_data","sright_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data"],freezeNames:["sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data"],colorGroup:[3,3,3,3,0,1,0,2,0,1,0]},"11W":{id:10,num:11,keys:["KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Digit2","KeyT","KeyY","Digit0"],noteNames:["left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,1,0,2,0,1,0,2,3,3,2]},"11i":{id:11,num:11,keys:["KeyS","KeyC","KeyD","KeyE","KeyF","KeyG","KeyJ","KeyM","KeyK","KeyI","KeyL"],noteNames:["left_data","down_data","gor_data","up_data","right_data","space_data","sleft_data","sdown_data","siyo_data","sup_data","sright_data"],freezeNames:["frzLeft_data","frzDown_data","frzGor_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzIyo_data","sfrzUp_data","sfrzRight_data"],colorGroup:[0,0,2,0,0,2,1,1,2,1,1]},12:{id:12,num:12,keys:["KeyB","KeyN","KeyJ","KeyM","KeyK","Comma","KeyL","Period","KeyU","KeyI","Digit8","KeyO"],noteNames:["oni_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleft_data","sdown_data","sup_data","sright_data"],freezeNames:["foni_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data"],colorGroup:[2,0,1,0,1,0,1,0,3,3,3,3]},13:{id:13,num:13,keys:["KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon","KeyU","KeyI","Digit8","KeyO"],noteNames:["left_data","down_data","up_data","right_data","space_data","sleft_data","sdown_data","sup_data","sright_data","tleft_data","tdown_data","tup_data","tright_data"],freezeNames:["frzLeft_data","frzDown_data","frzUp_data","frzRight_data","frzSpace_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","tfrzLeft_data","tfrzDown_data","tfrzUp_data","tfrzRight_data"],colorGroup:[0,0,0,0,2,1,1,1,1,3,3,3,3]},14:{id:14,num:14,keys:["KeyB","KeyN","KeyJ","KeyM","KeyK","Comma","KeyL","Period","KeyY","KeyU","KeyI","Digit8","KeyO","KeyP"],noteNames:["oni_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","sleftdia_data","sleft_data","sdown_data","sup_data","sright_data","srightdia_data"],freezeNames:["foni_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","sfrzLdia_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","sfrzRdia_data"],colorGroup:[2,0,1,0,1,0,1,0,2,3,3,3,3,2]},"14i":{id:15,num:14,keys:["KeyZ","KeyX","KeyC","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","KeyU","KeyI","Digit8","KeyO"],noteNames:["gor_data","space_data","iyo_data","sleft_data","sleftdia_data","sdown_data","sspace_data","sup_data","srightdia_data","sright_data","left_data","down_data","up_data","right_data"],freezeNames:["frzGor_data","frzSpace_data","frzIyo_data","sfrzLeft_data","sfrzLdia_data","sfrzDown_data","sfrzSpace_data","sfrzUp_data","sfrzRdia_data","sfrzRight_data","frzLeft_data","frzDown_data","frzUp_data","frzRight_data"],colorGroup:[2,2,2,0,1,0,2,0,1,0,3,3,3,3]},15:{id:16,num:15,keys:["KeyW","KeyE","Digit3","KeyR","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","KeyU","KeyI","Digit8","KeyO"],noteNames:["sleft_data","sdown_data","sup_data","sright_data","left_data","leftdia_data","down_data","space_data","up_data","rightdia_data","right_data","tleft_data","tdown_data","tup_data","tright_data"],freezeNames:["sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","frzLeft_data","frzLdia_data","frzDown_data","frzSpace_data","frzUp_data","frzRdia_data","frzRight_data","tfrzLeft_data","tfrzDown_data","tfrzUp_data","tfrzRight_data"],colorGroup:[3,3,3,3,0,1,0,2,0,1,0,3,3,3,3]},"16i":{id:17,num:16,keys:["KeyZ","KeyX","KeyC","KeyA","KeyS","KeyD","KeyF","KeyG","KeyJ","KeyK","KeyL","Semicolon","KeyU","KeyI","Digit8","KeyO"],noteNames:["gor_data","space_data","iyo_data","sleft_data","sdown_data","sup_data","sright_data","aspace_data","aleft_data","adown_data","aup_data","aright_data","left_data","down_data","up_data","right_data"],freezeNames:["frzGor_data","frzSpace_data","frzIyo_data","sfrzLeft_data","sfrzDown_data","sfrzUp_data","sfrzRight_data","afrzSpace_data","afrzLeft_data","afrzDown_data","afrzUp_data","afrzRight_data","frzLeft_data","frzDown_data","frzUp_data","frzRight_data"],colorGroup:[2,2,2,1,0,1,0,2,0,1,0,1,3,3,3,3]},17:{id:18,num:17,keys:["KeyA","KeyZ","KeyS","KeyX","KeyD","KeyC","KeyF","KeyV","KeyG","KeyN","KeyJ","KeyM","KeyK","Comma","KeyL","Period"],noteNames:["aleft_data","bleft_data","adown_data","bdown_data","aup_data","bup_data","aright_data","bright_data","space_data","cleft_data","dleft_data","cdown_data","ddown_data","cup_data","dup_data","cright_data","dright_data"],freezeNames:["afrzLeft_data","bfrzLeft_data","afrzDown_data","bfrzDown_data","afrzUp_data","bfrzUp_data","afrzRight_data","bfrzRight_data","frzSpace_data","cfrzLeft_data","dfrzLeft_data","cfrzDown_data","dfrzDown_data","cfrzUp_data","dfrzUp_data","cfrzRight_data","dfrzRight_data"],colorGroup:[0,1,0,1,0,1,0,1,2,1,0,1,0,1,0,1,0]}},K=30,v=5,b=384,w=b,D=b/8,k=60,N=20,L=["#ff0000","#0000ff","#00cc00","#ff9000"],S=["#ff4dd2","#00ffff","#ceff00","#c99b7d"],P=["#fff0ff","#f0f0ff","#f0fff0","#fff0dd"],R=r["a"].extend({name:"EditorMain",props:{pageNum:Number,selectedKey:String,loadScoreData:{type:Object}},data:function(){var t=this.selectedKey,a=z;return{currentPosition:0,scoreData:this.loadScoreData,keyConfig:a,divisor:24,keyKind:t,page:1,keyNum:a[t].num,editorWidth:K*a[t].num}},methods:{baseLayerDraw:function(){var t=this.divisor,a=this.keyNum,e=this.editorWidth,r=this.stage,i=this.baseLayer,n=this.notesLayer,s=this.currentPositionLayer;i.destroyChildren();for(var o=0;o<a;o++){var d=(o+1)*K,f=this.keyConfig[this.keyKind].colorGroup,u=P[f[o]],c=new g.a.Rect({x:d-K,width:K,height:w,fill:u,strokeWidth:0});i.add(c);var l=new g.a.Line({points:[d,0,d,w],stroke:"#969696",strokeWidth:.5});i.add(l)}for(var _=0;_<b/t;_++){var h=(_+1)*t;l=new g.a.Line({points:[0,h,e,h],stroke:"#969696",strokeWidth:t*(_+1)%D==0?1:.5});i.add(l)}var p=new g.a.Rect({width:e,height:w,stroke:"black",strokeWidth:1});i.add(p),r.add(i),r.add(n),r.add(s)},currentPositionDraw:function(){var t=this.stage,a=this.currentPositionLayer;a.destroyChildren();var e=new g.a.Line({y:w-this.currentPosition,points:[0,0,this.editorWidth,0],stroke:"#d8d800",strokeWidth:1.75});a.add(e),t.add(a)},hasNote:function(t,a,e){var r=this.scoreData.scores[this.page-1];return r.notes[a].includes(e)||r.freezes[a].includes(e)},noteAdd:function(t,a,e,r){r?this.scoreData.scores[t-1].freezes[a].push(e):this.scoreData.scores[t-1].notes[a].push(e)},noteRemove:function(t,a,e){this.scoreData.scores[t-1].freezes[a]=this.scoreData.scores[t-1].freezes[a].filter((function(t){return t!==e})),this.scoreData.scores[t-1].notes[a]=this.scoreData.scores[t-1].notes[a].filter((function(t){return t!==e}))},noteDraw:function(t,a,e){var r=this.stage,i=this.notesLayer,n=this.keyConfig[this.keyKind].colorGroup,s=function(t,a){return a?S[n[t]]:L[n[t]]}(t,e),o=new g.a.Rect({x:t*K,y:w-a-v/2,width:K,height:v,fill:s,id:"note-"+t+"-"+a});i.add(o),r.add(i)},noteClear:function(t,a){var e=this.stage,r=this.notesLayer,i=r.findOne("#note-"+t+"-"+a);i.destroy(),e.add(r)},displayPageScore:function(t){var a=this,e=this.stage,r=this.notesLayer,i=this.scoreData.scores[t-1];r.destroyChildren(),e.add(r),i.notes.forEach((function(t,e){t.forEach((function(t){a.noteDraw(e,t,!1)}))})),i.freezes.forEach((function(t,e){t.forEach((function(t){a.noteDraw(e,t,!0)}))}))},currentPositionMove:function(t){this.currentPosition=t,this.currentPositionDraw()},pageMove:function(t){this.page=t,this.currentPositionMove(0);var a=this.scoreData.scores[t-1];void 0===a&&(this.scoreData.scores[t-1]={notes:new Array(this.keyNum).fill([]).map((function(){return[]})),freezes:new Array(this.keyNum).fill([]).map((function(){return[]}))}),this.displayPageScore(t)},pageMinus:function(t){this.$emit("page-minus",t),Math.max(1,this.page-t),this.pageMove(this.page)},pagePlus:function(t){this.$emit("page-plus",t),this.page+=t,this.pageMove(this.page)},changeDivisor:function(t){this.divisor=t,this.currentPosition%t!==0&&this.currentPositionMove(Math.floor(this.currentPosition/t)*t),this.baseLayerDraw()},keydownAction:function(t){if(t.ctrlKey)switch(t.code){case"Digit1":this.changeDivisor(D);break;case"Digit2":this.changeDivisor(D/2);break;case"Digit3":this.changeDivisor(D/4);break;case"Digit4":this.changeDivisor(D/3);break;case"Digit5":this.changeDivisor(D/6);break;case"Digit6":this.changeDivisor(D/12);break;case"Digit7":this.changeDivisor(D/8);break}else switch(t.code){case"Space":this.currentPosition+=this.divisor,this.currentPosition>=b?this.pagePlus(1):this.currentPositionMove(this.currentPosition);break;case"ArrowUp":this.currentPosition+=this.divisor,this.currentPosition>=b?this.pagePlus(1):this.currentPositionMove(this.currentPosition);break;case"ArrowDown":this.currentPosition-=this.divisor,this.currentPosition<0?1===this.page?this.currentPosition=0:this.pageMinus(1):this.currentPositionMove(this.currentPosition);break;case"ArrowLeft":t.shiftKey?this.pageMinus(5):this.pageMinus(1);break;case"ArrowRight":t.shiftKey?this.pagePlus(5):this.pagePlus(1);break;default:var a=this.keyConfig[this.keyKind].keys.indexOf(t.code),e=t.shiftKey;a>=0&&(this.hasNote(this.page,a,this.currentPosition)?(this.noteRemove(this.page,a,this.currentPosition),this.noteClear(a,this.currentPosition)):(this.noteAdd(this.page,a,this.currentPosition,e),this.noteDraw(a,this.currentPosition,e)),this.currentPosition+=this.divisor,this.currentPosition>=b?this.pagePlus(1):this.currentPositionMove(this.currentPosition));break}}},mounted:function(){var t=new g.a.Stage({x:N,y:N,container:"canvas",width:this.editorWidth+2*N,height:w+2*N}),a=new g.a.Layer({container:"baseLayer"}),e=new g.a.Layer({container:"currentPositionLayer"}),r=new g.a.Layer({container:"notesLayer"});this.stage=t,this.baseLayer=a,this.currentPositionLayer=e,this.notesLayer=r,this.baseLayerDraw(),this.currentPositionDraw(),this.displayPageScore(1)},watch:{pageNum:function(t){this.pageMove(t)},scoreData:function(t){this.$emit("changeScoreData",t)}}}),C=R,U=Object(d["a"])(C,p,y,!1,null,null,null),M=U.exports,x=function(){function t(t){this.keyNum=t,this.timings=[{label:1,firstNum:200,bpm:140}],this.scores=[{notes:new Array(this.keyNum).fill([]).map((function(){return[]})),freezes:new Array(this.keyNum).fill([]).map((function(){return[]}))}]}return t}(),G=function(){function t(t,a){this.keyKind=t,this.keyConfig=a,this.keyNum=this.keyConfig[this.keyKind].num}return t.prototype.toFrameData=function(t){for(var a={notes:new Array(this.keyNum).fill([]).map((function(){return[]})),freezes:new Array(this.keyNum).fill([]).map((function(){return[]}))},e=t.timings.sort((function(t,a){return t.label-a.label})),r=t.scores,i=0,n=r.length+1,s=[],o=function(t){var n=r[t-1];if(void 0===n)s.push(a);else{e[i]&&t===e[i].label&&i++;var o=e[i-1],d=60*k/D/o.bpm,f=o.firstNum+(t-o.label)*b*d,u=n.notes.map((function(t){return t.map((function(t){return Math.round(f+t*d)}))})),c=n.freezes.map((function(t){return t.map((function(t){return Math.round(f+t*d)}))}));s.push({notes:u,freezes:c})}},d=1;d<n;d++)o(d);return s},t.prototype.convert=function(t){var a=this,e=this.toFrameData(t),r={notes:new Array(this.keyNum).fill([]).map((function(){return[]})),freezes:new Array(this.keyNum).fill([]).map((function(){return[]}))},i=e.reduce((function(t,e){for(var r=0;r<a.keyNum;r++)t.notes[r]=t.notes[r].concat(e.notes[r]),t.freezes[r]=t.freezes[r].concat(e.freezes[r]);return t}),r),n=i.notes.reduce((function(t,e,r){return t+a.keyConfig[a.keyKind].noteNames[r]+"="+e.join(",")+"|"}),"|"),s=i.freezes.reduce((function(t,e,r){return t+a.keyConfig[a.keyKind].freezeNames[r]+"="+e.join(",")+"|"}),n);return s},t.prototype.save=function(t){return JSON.stringify(t)},t}(),O=r["a"].extend({name:"EditorController",components:{EditorMain:M},props:{selectedKey:String,loadScoreDataStr:String,loadMusicUrl:String},data:function(){var t,a=this.selectedKey,e=z[a].num;try{t=this.loadScoreDataStr?JSON.parse(this.loadScoreDataStr):new x(e)}catch(r){alert("不正な譜面データが与えられたため、正しく読み込めませんでした。"),t=new x(e)}return{pageNum:1,labelNum:1,timing:{label:1,firstNum:200,bpm:140},scoreData:t,keyKind:this.selectedKey,keyConfig:z}},methods:{pageMinus:function(t){this.pageNum=Math.max(1,this.pageNum-t)},pagePlus:function(t){this.pageNum+=t},labelMinus:function(t){this.labelNum=Math.max(1,this.labelNum-t),this.labelMove(this.labelNum),this.pageNum=this.scoreData.timings[this.labelNum-1].label},labelPlus:function(t){this.labelNum=Math.min(this.scoreData.timings.length,this.labelNum+t),this.labelMove(this.labelNum),this.pageNum=this.scoreData.timings[this.labelNum-1].label},labelMove:function(t){var a=this.scoreData.timings[t-1];this.labelNum=t,this.timing=a},changeScoreData:function(t){this.scoreData=t},convert:function(){var t=new G(this.keyKind,this.keyConfig),a=t.convert(this.scoreData);navigator.clipboard&&(navigator.clipboard.writeText(a),alert("セーブデータをクリップボードにコピーしました！"))},save:function(){var t=new G(this.keyKind,this.keyConfig),a=t.save(this.scoreData);navigator.clipboard&&(navigator.clipboard.writeText(a),alert("セーブデータをクリップボードにコピーしました！"))},getLabelNumByPageNum:function(t){var a=this.scoreData.timings.map((function(t){return t.label}));return a.indexOf(t)},getNearestLabelNumByPageNum:function(t){var a=this.scoreData.timings.map((function(t){return t.label})),e=a.reduce((function(a,e){return e<=t?a+1:a}),0);return e},labelOperation:function(t,a){if(a){var e=this.getLabelNumByPageNum(t);this.scoreData.timings.splice(e,1),this.labelNum--,this.timing=this.scoreData.timings[this.labelNum-1]}else{var r=this.timing,i=60*k/D/r.bpm,n=r.firstNum+(t-r.label)*b*i,s={label:t,firstNum:n,bpm:r.bpm};this.scoreData.timings.splice(this.labelNum,0,s),this.timing=s,this.labelNum++}},callLabelOperation:function(){var t=this.pageNum,a=-1!==this.getLabelNumByPageNum(t);this.labelOperation(t,a),this.pageNum=t}},watch:{pageNum:function(t){var a=this.getNearestLabelNumByPageNum(t);this.labelNum=a,this.labelMove(a)}}}),A=O,F=Object(d["a"])(A,_,h,!1,null,null,null),E=F.exports,J=r["a"].extend({name:"Editor",components:{EditorController:E},props:{loadScoreDataStr:String,loadMusicUrl:String,selectedKey:String}}),j=J,T=Object(d["a"])(j,c,l,!1,null,null,null),I=T.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"start"}},[e("start-main")],1)},W=[],B=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"start-container"}},[e("div",{attrs:{id:"start-title"}},[t._v("Dancing☆Onigiri Editor")]),e("div",{attrs:{id:"start-menu"}},[e("start-uploader",{attrs:{msg:t.musicTitle},on:{fileRecieve:t.onMusicFileRecieve}}),e("start-uploader",{attrs:{msg:t.scoreTitle},on:{fileRecieve:t.onScoreFileRecieve}}),e("div",{attrs:{id:"start-go-next"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedKey,expression:"selectedKey"}],staticClass:"uk-select uk-form-width-medium",attrs:{id:"start-key-selector"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.selectedKey=a.target.multiple?e:e[0]}}},t._l(t.keyConfig,(function(a,r){return e("option",{key:a.id},[t._v(t._s(r))])})),0),e("router-link",{staticClass:"start-go-btn btn-red",attrs:{to:{name:"editor",path:"editor",params:{scoreData:t.scoreDataStr,musicUrl:t.musicUrl},query:{key:t.selectedKey}}}},[t._v(" NEXT ")])],1),e("div",{attrs:{id:"start-version"}},[t._v("ver 1.0.0α created by SKB")])],1)])},X=[],Z=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"start-music-select"},on:{dragover:function(a){return a.preventDefault(),t.ondragover(a)},drop:function(a){return a.preventDefault(),t.ondrop(a)}}},[e("div",{staticClass:"uk-placeholder uk-text-center uk-margin-remove-bottom",attrs:{"uk-form-custom":""}},[e("input",{ref:"input",attrs:{type:"file"},on:{change:t.loadFile}}),e("span",{attrs:{"uk-icon":"icon: upload"}}),e("span",{staticClass:"uk-text-middle"},[t._v(" "+t._s(t.msg)+" ")]),e("span",{staticClass:"uk-link"},[t._v("参照")])])])},q=[],V=r["a"].extend({name:"StartUploader",props:{msg:String},data:function(){return{vue:this,file:null}},methods:{ondragover:function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="copy")},ondrop:function(t){if(t.dataTransfer){var a=t.dataTransfer.files[0]||null;this.file=a}else this.file=null},loadFile:function(t){if(t.target instanceof HTMLInputElement){var a=t.target.files?t.target.files[0]:null;this.file=a}else this.file=null}},watch:{file:function(t){null!==t?this.$emit("fileRecieve",t):alert("ファイルが見つかりませんでした。")}}}),Y=V,H=Object(d["a"])(Y,Z,q,!1,null,null,null),Q=H.exports,tt=r["a"].extend({name:"StartMain",components:{StartUploader:Q},data:function(){return{keyConfig:z,musicTitle:"楽曲ファイルをドロップ",scoreTitle:"譜面ファイルをドロップ",selectedKey:"5",musicUrl:null,scoreDataStr:null}},methods:{onMusicFileRecieve:function(t){var a=this,e="audio.*";if(t.type.match(e)){var r=new FileReader;r.onload=function(){var e=r.result;"string"==typeof e&&(a.musicUrl=e,a.musicTitle=t.name)},r.readAsDataURL(t)}else alert("音楽ファイルではありません。")},onScoreFileRecieve:function(t){var a=this,e="(application/json|text/plain)";if(t.type.match(e)){var r=new FileReader;r.onload=function(){var e=r.result;"string"==typeof e&&(a.scoreDataStr=e,a.scoreTitle=t.name)},r.readAsText(t)}else alert("譜面ファイルではありません。")}}}),at=tt,et=Object(d["a"])(at,B,X,!1,null,null,null),rt=et.exports,it=r["a"].extend({name:"Start",components:{StartMain:rt}}),nt=it,st=Object(d["a"])(nt,$,W,!1,null,null,null),ot=st.exports,dt=e("8c4f");r["a"].config.productionTip=!1,r["a"].use(dt["a"]);var ft=new dt["a"]({routes:[{path:"/",name:"Start",component:ot},{path:"/editor",name:"editor",component:I,props:function(t){return{loadScoreDataStr:t.params.scoreData,loadMusicUrl:t.params.musicUrl,selectedKey:t.query.key||"7"}}}]}),ut=e("8323"),ct=e.n(ut),lt=e("263c"),_t=e.n(lt);e("30b0"),e("d0e7");ct.a.use(_t.a),r["a"].config.productionTip=!1,new r["a"]({router:ft,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.5b20b048.js.map