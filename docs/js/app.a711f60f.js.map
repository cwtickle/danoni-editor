{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?dcce","webpack:///./src/App.vue","webpack:///./src/App.vue?96b3","webpack:///./src/App.vue?a286","webpack:///./src/pages/Editor.vue?6c1c","webpack:///./src/components/editor/EditorController.vue?6d10","webpack:///./src/components/editor/EditorMain.vue?70ea","webpack:///./src/model/KeyConfig.ts","webpack:///./src/components/editor/EditorConstant.ts","webpack:///./src/components/editor/EditorMain.vue","webpack:///./src/components/editor/EditorMain.vue?7838","webpack:///./src/components/editor/EditorMain.vue?7b67","webpack:///./src/model/ScoreData.ts","webpack:///./src/components/editor/ScoreConverter.ts","webpack:///./src/components/editor/EditorController.vue","webpack:///./src/components/editor/EditorController.vue?c5dc","webpack:///./src/components/editor/EditorController.vue?280c","webpack:///./src/pages/Editor.vue","webpack:///./src/pages/Editor.vue?9ca7","webpack:///./src/pages/Editor.vue?983f","webpack:///./src/pages/Start.vue?9b10","webpack:///./src/components/start/StartMain.vue?8168","webpack:///./src/components/start/StartUploader.vue?6336","webpack:///./src/components/start/StartUploader.vue","webpack:///./src/components/start/StartUploader.vue?0c8c","webpack:///./src/components/start/StartUploader.vue?5c4e","webpack:///./src/components/start/StartMain.vue","webpack:///./src/components/start/StartMain.vue?834a","webpack:///./src/components/start/StartMain.vue?9ff1","webpack:///./src/pages/Start.vue","webpack:///./src/pages/Start.vue?249f","webpack:///./src/pages/Start.vue?dbc7","webpack:///./src/router.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","extend","component","attrs","selectedKey","loadScoreDataStr","loadMusicUrl","pageNum","scoreData","keyKind","on","pageMinus","pagePlus","staticClass","_v","$event","_s","ref","domProps","getLabelNumByPageNum","callLabelOperation","labelMinus","labelNum","labelPlus","directives","rawName","timing","expression","target","composing","$set","convert","save","preventDefault","keydownAction","DefaultKeyConfig","num","keys","noteNames","freezeNames","noteWidth","noteHeight","verticalSizeNum","editorHeight","quarterInterval","fps","canvasMargin","props","Number","String","loadScoreData","type","currentPosition","divisor","page","keyNum","editorWidth","methods","baseLayerDraw","stage","baseLayer","notesLayer","currentPositionLayer","destroyChildren","xPos","line","Line","points","stroke","strokeWidth","add","filler","Rect","x","width","height","fill","yPos","rect","currentPositionDraw","currentPositionLine","y","hasNote","lane","position","pageScore","scores","notes","includes","freezes","noteAdd","isFreeze","noteRemove","filter","pos","noteDraw","color","note","id","noteClear","findOne","destroy","displayPageScore","forEach","laneArr","currentPositionMove","pageMove","undefined","Array","map","$emit","Math","max","changeDivisor","floor","e","ctrlKey","code","shiftKey","possiblyLane","indexOf","mounted","Stage","container","Layer","watch","newPage","timings","label","firstNum","bpm","keyConfig","toFrameData","initialPageScore","sort","a","b","labelCounter","maxPageNum","frameScores","pageNoteFrames","notesArr","round","freezeNoteFrames","freezesArr","initialData","reduce","currentPage","concat","noteStr","str","laneNum","join","dataStr","JSON","stringify","components","EditorMain","parse","DefaultScoreData","alert","labelMove","min","changeScoreData","converter","navigator","clipboard","writeText","labels","getNearestLabelNumByPageNum","acc","labelOperation","labelFlag","oldTiming","framePerPosition","newFirstNum","newTiming","EditorController","musicTitle","onMusicFileRecieve","scoreTitle","onScoreFileRecieve","$$selectedVal","options","selected","val","_value","multiple","path","params","scoreDataStr","musicUrl","query","ondragover","ondrop","loadFile","msg","vue","file","dataTransfer","dropEffect","files","HTMLInputElement","newFile","StartUploader","mimeTypePattern","match","FileReader","onload","readAsDataURL","readAsText","StartMain","config","productionTip","use","routes","Start","Editor","router","h","App","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,kGCvJLyC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,gBAAgB,IACzHE,EAAkB,GCUP,SAAIC,OAAO,CACxBjC,KAAM,QCZ0T,I,YCO9TkC,EAAY,eACd,EACAT,EACAO,GACA,EACA,KACA,KACA,MAIa,EAAAE,E,QClBX,EAAS,WAAa,IAAIR,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,WAAW,CAACL,EAAG,oBAAoB,CAACK,MAAM,CAAC,eAAeT,EAAIU,YAAY,sBAAsBV,EAAIW,iBAAiB,iBAAiBX,EAAIY,iBAAiB,IAC7Q,EAAkB,GCDlB,EAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,sBAAsB,CAACL,EAAG,cAAc,CAACK,MAAM,CAAC,WAAWT,EAAIa,QAAQ,kBAAkBb,EAAIc,UAAU,eAAed,EAAIe,SAASC,GAAG,CAAC,aAAahB,EAAIiB,UAAU,YAAYjB,EAAIkB,YAAYd,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,gBAAgB,CAACL,EAAG,MAAM,CAACe,YAAY,sBAAsBV,MAAM,CAAC,GAAK,cAAc,CAACL,EAAG,MAAM,CAACe,YAAY,YAAY,CAACnB,EAAIoB,GAAG,UAAUhB,EAAG,MAAM,CAACe,YAAY,qBAAqB,CAACf,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAIiB,UAAU,MAAM,CAACjB,EAAIoB,GAAG,OAAOhB,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAIiB,UAAU,MAAM,CAACjB,EAAIoB,GAAG,OAAOhB,EAAG,MAAM,CAACe,YAAY,iBAAiB,CAACnB,EAAIoB,GAAGpB,EAAIsB,GAAGtB,EAAIa,YAAYT,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAIkB,SAAS,MAAM,CAAClB,EAAIoB,GAAG,OAAOhB,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAIkB,SAAS,MAAM,CAAClB,EAAIoB,GAAG,WAAWhB,EAAG,MAAM,CAACe,YAAY,sBAAsBV,MAAM,CAAC,GAAK,eAAe,CAACL,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,qBAAqB,CAACL,EAAG,MAAM,CAACe,YAAY,YAAY,CAACnB,EAAIoB,GAAG,WAAWhB,EAAG,QAAQ,CAACmB,IAAI,iBAAiBJ,YAAY,cAAcV,MAAM,CAAC,GAAK,sBAAsB,KAAO,WAAW,SAA2B,IAAhBT,EAAIa,SAAeW,SAAS,CAAC,SAAqD,IAA3CxB,EAAIyB,qBAAqBzB,EAAIa,UAAiBG,GAAG,CAAC,MAAQhB,EAAI0B,wBAAwBtB,EAAG,MAAM,CAACe,YAAY,qBAAqB,CAACf,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAI2B,WAAW,MAAM,CAAC3B,EAAIoB,GAAG,OAAOhB,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAI2B,WAAW,MAAM,CAAC3B,EAAIoB,GAAG,OAAOhB,EAAG,MAAM,CAACe,YAAY,iBAAiB,CAACnB,EAAIoB,GAAGpB,EAAIsB,GAAGtB,EAAI4B,aAAaxB,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAI6B,UAAU,MAAM,CAAC7B,EAAIoB,GAAG,OAAOhB,EAAG,MAAM,CAACe,YAAY,gBAAgBH,GAAG,CAAC,MAAQ,SAASK,GAAQ,OAAOrB,EAAI6B,UAAU,MAAM,CAAC7B,EAAIoB,GAAG,WAAWhB,EAAG,MAAM,CAACe,YAAY,sBAAsBV,MAAM,CAAC,GAAK,YAAY,CAACL,EAAG,MAAM,CAACe,YAAY,YAAY,CAACnB,EAAIoB,GAAG,kBAAkBhB,EAAG,QAAQ,CAAC0B,WAAW,CAAC,CAACxD,KAAK,QAAQyD,QAAQ,UAAUhD,MAAOiB,EAAIgC,OAAe,SAAEC,WAAW,oBAAoBd,YAAY,yBAAyBV,MAAM,CAAC,KAAO,UAAUe,SAAS,CAAC,MAASxB,EAAIgC,OAAe,UAAGhB,GAAG,CAAC,MAAQ,SAASK,GAAWA,EAAOa,OAAOC,WAAqBnC,EAAIoC,KAAKpC,EAAIgC,OAAQ,WAAYX,EAAOa,OAAOnD,aAAaqB,EAAG,MAAM,CAACe,YAAY,sBAAsBV,MAAM,CAAC,GAAK,aAAa,CAACL,EAAG,MAAM,CAACe,YAAY,YAAY,CAACnB,EAAIoB,GAAG,SAAShB,EAAG,QAAQ,CAAC0B,WAAW,CAAC,CAACxD,KAAK,QAAQyD,QAAQ,UAAUhD,MAAOiB,EAAIgC,OAAU,IAAEC,WAAW,eAAed,YAAY,yBAAyBV,MAAM,CAAC,KAAO,UAAUe,SAAS,CAAC,MAASxB,EAAIgC,OAAU,KAAGhB,GAAG,CAAC,MAAQ,SAASK,GAAWA,EAAOa,OAAOC,WAAqBnC,EAAIoC,KAAKpC,EAAIgC,OAAQ,MAAOX,EAAOa,OAAOnD,aAAaqB,EAAG,MAAM,CAACe,YAAY,sBAAsBV,MAAM,CAAC,GAAK,gBAAgB,CAACL,EAAG,MAAM,CAACe,YAAY,0BAA0BH,GAAG,CAAC,MAAQhB,EAAIqC,UAAU,CAACrC,EAAIoB,GAAG,QAAQhB,EAAG,MAAM,CAACe,YAAY,2BAA2BH,GAAG,CAAC,MAAQhB,EAAIsC,OAAO,CAACtC,EAAIoB,GAAG,eAAe,IAC/lG,EAAkB,GCDlB,EAAS,WAAa,IAAIpB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACmB,IAAI,SAASd,MAAM,CAAC,GAAK,SAAS,SAAW,MAAMO,GAAG,CAAC,QAAU,SAASK,GAAgC,OAAxBA,EAAOkB,iBAAwBvC,EAAIwC,cAAcnB,QACzO,EAAkB,G,qBCUToB,EAA8B,CACzC,EAAK,CACHC,IAAK,EACLC,KAAM,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,QACvCC,UAAW,CACT,YACA,YACA,UACA,aACA,cAEFC,YAAa,CACX,eACA,eACA,aACA,gBACA,kBAGJ,EAAK,CACHH,IAAK,EACLC,KAAM,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QACvDC,UAAW,CACT,YACA,eACA,YACA,aACA,UACA,gBACA,cAEFC,YAAa,CACX,eACA,kBACA,eACA,gBACA,aACA,mBACA,kBAGJ,GAAM,CACJH,IAAK,GACLC,KAAM,CACJ,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,SACA,QAEFC,UAAW,CACT,YACA,eACA,YACA,aACA,UACA,gBACA,aACA,aACA,aACA,WACA,eAEFC,YAAa,CACX,eACA,kBACA,eACA,gBACA,aACA,mBACA,gBACA,gBACA,gBACA,cACA,oBC3FOC,EAAY,GACZC,EAAa,EACbC,EAAkB,IAClBC,EAAeD,EACfE,EAAkBF,EAAkB,EACpCG,EAAM,GAENC,EAAe,GCgCb,SAAI7C,OAAO,CACxBjC,KAAM,aACN+E,MAAO,CACLxC,QAASyC,OACT5C,YAAa6C,OACbC,cAAe,CAAEC,KAAM9G,SAEzBT,KAAA,WACE,IAAM6E,EAAUd,KAAKS,YACrB,MAAO,CACLgD,gBAAiB,EACjB5C,UAAWb,KAAKuD,cAChBG,QAAS,GACT5C,QAASA,EACT6C,KAAM,EACNC,OAAQpB,EAAiB1B,GAAS2B,IAClCoB,YAAahB,EAAYL,EAAiB1B,GAAS2B,MAGvDqB,QAAS,CAEPC,cAAA,WACE,IAAML,EAAU1D,KAAK0D,QACfE,EAAS5D,KAAK4D,OACdC,EAAc7D,KAAK6D,YAEnBG,EAAQhE,KAAKgE,MACbC,EAAYjE,KAAKiE,UACjBC,EAAalE,KAAKkE,WAClBC,EAAuBnE,KAAKmE,qBAElCF,EAAUG,kBAGV,IAAK,IAAI7H,EAAI,EAAGA,EAAIqH,EAAQrH,IAAK,CAC/B,IAAM8H,GAAQ9H,EAAI,GAAKsG,EACjByB,EAAO,IAAI,IAAMC,KAAK,CAC1BC,OAAQ,CAACH,EAAM,EAAGA,EAAMrB,GACxByB,OAAQ,UACRC,YAAa,KAIf,GAFAT,EAAUU,IAAIL,GAEV/H,EAAI,GAAK,EAAG,CACd,IAAMqI,EAAS,IAAI,IAAMC,KAAK,CAC5BC,EAAGT,EAAOxB,EACVkC,MAAOlC,EACPmC,OAAQhC,EACRiC,KAAM,UACNP,YAAa,IAEfT,EAAUU,IAAIC,IAKlB,IAASrI,EAAI,EAAGA,EAAIwG,EAAkBW,EAASnH,IAAK,CAClD,IAAM2I,GAAQ3I,EAAI,GAAKmH,EACjBY,EAAO,IAAI,IAAMC,KAAK,CAC1BC,OAAQ,CAAC,EAAGU,EAAMrB,EAAaqB,GAC/BT,OAAQ,UACRC,YAAchB,GAAWnH,EAAI,GAAM0G,GAAmB,EAAI,EAAI,KAEhEgB,EAAUU,IAAIL,GAIhB,IAAMa,EAAO,IAAI,IAAMN,KAAK,CAC1BE,MAAOlB,EACPmB,OAAQhC,EACRyB,OAAQ,QACRC,YAAa,IAEfT,EAAUU,IAAIQ,GAEdnB,EAAMW,IAAIV,GACVD,EAAMW,IAAIT,GACVF,EAAMW,IAAIR,IAIZiB,oBAAA,WACE,IAAMpB,EAAQhE,KAAKgE,MACbG,EAAuBnE,KAAKmE,qBAClCA,EAAqBC,kBAErB,IAAMiB,EAAsB,IAAI,IAAMd,KAAK,CACzCe,EAAGtC,EAAehD,KAAKyD,gBACvBe,OAAQ,CAAC,EAAG,EAAGxE,KAAK6D,YAAa,GACjCY,OAAQ,UACRC,YAAa,MAEfP,EAAqBQ,IAAIU,GACzBrB,EAAMW,IAAIR,IAIZoB,QAAA,SAAQ5B,EAAc6B,EAAcC,GAClC,IAAMC,EAAY1F,KAAKa,UAAU8E,OAAO3F,KAAK2D,KAAO,GACpD,OACE+B,EAAUE,MAAMJ,GAAMK,SAASJ,IAC/BC,EAAUI,QAAQN,GAAMK,SAASJ,IAKrCM,QAAA,SACEpC,EACA6B,EACAC,EACAO,GAEIA,EACFhG,KAAKa,UAAU8E,OAAOhC,EAAO,GAAGmC,QAAQN,GAAMzI,KAAK0I,GAChDzF,KAAKa,UAAU8E,OAAOhC,EAAO,GAAGiC,MAAMJ,GAAMzI,KAAK0I,IAIxDQ,WAAA,SAAWtC,EAAc6B,EAAcC,GACrCzF,KAAKa,UAAU8E,OAAOhC,EAAO,GAAGmC,QAAQN,GAAQxF,KAAKa,UAAU8E,OAC7DhC,EAAO,GACPmC,QAAQN,GAAMU,QAAO,SAAAC,GAAO,OAAAA,IAAQV,KACtCzF,KAAKa,UAAU8E,OAAOhC,EAAO,GAAGiC,MAAMJ,GAAQxF,KAAKa,UAAU8E,OAC3DhC,EAAO,GACPiC,MAAMJ,GAAMU,QAAO,SAAAC,GAAO,OAAAA,IAAQV,MAItCW,SAAA,SAASZ,EAAcC,EAAkBO,GACvC,IAAMhC,EAAQhE,KAAKgE,MACbE,EAAalE,KAAKkE,WAGlBmC,EAAQ,SAAEb,EAAcQ,GAC5B,OAAIA,EACKR,EAAO,GAAK,EAAI,UAAY,UAE5BA,EAAO,GAAK,EAAI,MAAQ,OAJrB,CAMXA,EAAMQ,GAEHM,EAAO,IAAI,IAAMzB,KAAK,CAC1BC,EAAGU,EAAO3C,EACVyC,EAAGtC,EAAeyC,EAAW3C,EAAa,EAC1CiC,MAAOlC,EACPmC,OAAQlC,EACRmC,KAAMoB,EACNE,GAAI,QAAQf,EAAI,IAAIC,IAEtBvB,EAAWS,IAAI2B,GACftC,EAAMW,IAAIT,IAIZsC,UAAA,SAAUhB,EAAcC,GACtB,IAAMzB,EAAQhE,KAAKgE,MACbE,EAAalE,KAAKkE,WAElBoC,EAAOpC,EAAWuC,QAAQ,SAASjB,EAAI,IAAIC,GACjDa,EAAKI,UACL1C,EAAMW,IAAIT,IAIZyC,iBAAA,SAAiBhD,GAAjB,WACQK,EAAQhE,KAAKgE,MACbE,EAAalE,KAAKkE,WAElBwB,EAAY1F,KAAKa,UAAU8E,OAAOhC,EAAO,GAE/CO,EAAWE,kBACXJ,EAAMW,IAAIT,GAEVwB,EAAUE,MAAMgB,SAAQ,SAACC,EAASrB,GAChCqB,EAAQD,SAAQ,SAAAnB,GACd,EAAKW,SAASZ,EAAMC,GAAU,SAGlCC,EAAUI,QAAQc,SAAQ,SAACC,EAASrB,GAClCqB,EAAQD,SAAQ,SAAAnB,GACd,EAAKW,SAASZ,EAAMC,GAAU,UAMpCqB,oBAAA,SAAoBrB,GAClBzF,KAAKyD,gBAAkBgC,EACvBzF,KAAKoF,uBAIP2B,SAAA,SAASpD,GACP3D,KAAK2D,KAAOA,EACZ3D,KAAK8G,oBAAoB,GAEzB,IAAMpB,EAAuB1F,KAAKa,UAAU8E,OAAOhC,EAAO,QACxCqD,IAAdtB,IACF1F,KAAKa,UAAU8E,OAAOhC,EAAO,GAAK,CAChCiC,MAAO,IAAIqB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,YACjDpB,QAAS,IAAImB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,cAGvDlH,KAAK2G,iBAAiBhD,IAExB3C,UAAA,SAAU1B,GACRU,KAAKmH,MAAM,aAAc7H,GACzB8H,KAAKC,IAAI,EAAGrH,KAAK2D,KAAOrE,GACxBU,KAAK+G,SAAS/G,KAAK2D,OAErB1C,SAAA,SAAS3B,GACPU,KAAKmH,MAAM,YAAa7H,GACxBU,KAAK2D,MAAQrE,EACbU,KAAK+G,SAAS/G,KAAK2D,OAIrB2D,cAAA,SAAc5D,GACZ1D,KAAK0D,QAAUA,EACX1D,KAAKyD,gBAAkBC,IAAY,GACrC1D,KAAK8G,oBACHM,KAAKG,MAAMvH,KAAKyD,gBAAkBC,GAAWA,GAGjD1D,KAAK+D,iBAIPxB,cAAA,SAAciF,GACZ,GAAIA,EAAEC,QACJ,OAAQD,EAAEE,MACR,IAAK,SACH1H,KAAKsH,cAAcrE,GACnB,MACF,IAAK,SACHjD,KAAKsH,cAAcrE,EAAkB,GACrC,MACF,IAAK,SACHjD,KAAKsH,cAAcrE,EAAkB,GACrC,MACF,IAAK,SACHjD,KAAKsH,cAAcrE,EAAkB,GACrC,MACF,IAAK,SACHjD,KAAKsH,cAAcrE,EAAkB,GACrC,MACF,IAAK,SACHjD,KAAKsH,cAAcrE,EAAkB,IACrC,MACF,IAAK,SACHjD,KAAKsH,cAAcrE,EAAkB,GACrC,WAGJ,OAAQuE,EAAEE,MACR,IAAK,QACH1H,KAAKyD,iBAAmBzD,KAAK0D,QACzB1D,KAAKyD,iBAAmBV,EAAiB/C,KAAKiB,SAAS,GACtDjB,KAAK8G,oBAAoB9G,KAAKyD,iBACnC,MACF,IAAK,UACHzD,KAAKyD,iBAAmBzD,KAAK0D,QACzB1D,KAAKyD,iBAAmBV,EAAiB/C,KAAKiB,SAAS,GACtDjB,KAAK8G,oBAAoB9G,KAAKyD,iBACnC,MACF,IAAK,YACHzD,KAAKyD,iBAAmBzD,KAAK0D,QACzB1D,KAAKyD,gBAAkB,EACP,IAAdzD,KAAK2D,KAAY3D,KAAKyD,gBAAkB,EACvCzD,KAAKgB,UAAU,GACfhB,KAAK8G,oBAAoB9G,KAAKyD,iBACrC,MACF,IAAK,YACC+D,EAAEG,SAAU3H,KAAKgB,UAAU,GAC1BhB,KAAKgB,UAAU,GACpB,MACF,IAAK,aACCwG,EAAEG,SAAU3H,KAAKiB,SAAS,GACzBjB,KAAKiB,SAAS,GACnB,MACF,QACE,IAAM2G,EAAepF,EAAiBxC,KAAKc,SAAS4B,KAAKmF,QACvDL,EAAEE,MAEE1B,EAAWwB,EAAEG,SAEfC,GAAgB,IACd5H,KAAKuF,QAAQvF,KAAK2D,KAAMiE,EAAc5H,KAAKyD,kBAC7CzD,KAAKiG,WAAWjG,KAAK2D,KAAMiE,EAAc5H,KAAKyD,iBAC9CzD,KAAKwG,UAAUoB,EAAc5H,KAAKyD,mBAElCzD,KAAK+F,QACH/F,KAAK2D,KACLiE,EACA5H,KAAKyD,gBACLuC,GAEFhG,KAAKoG,SAASwB,EAAc5H,KAAKyD,gBAAiBuC,IAGpDhG,KAAKyD,iBAAmBzD,KAAK0D,QACzB1D,KAAKyD,iBAAmBV,EAAiB/C,KAAKiB,SAAS,GACtDjB,KAAK8G,oBAAoB9G,KAAKyD,kBAErC,SAOVqE,QAAA,WACE,IAAM9D,EAAQ,IAAI,IAAM+D,MAAM,CAC5BjD,EAAG3B,EACHmC,EAAGnC,EACH6E,UAAW,SACXjD,MAAO/E,KAAK6D,YAA6B,EAAfV,EAC1B6B,OAAQhC,EAA8B,EAAfG,IAEnBc,EAAY,IAAI,IAAMgE,MAAM,CAChCD,UAAW,cAEP7D,EAAuB,IAAI,IAAM8D,MAAM,CAC3CD,UAAW,yBAEP9D,EAAa,IAAI,IAAM+D,MAAM,CACjCD,UAAW,eAGbhI,KAAKgE,MAAQA,EACbhE,KAAKiE,UAAYA,EACjBjE,KAAKmE,qBAAuBA,EAC5BnE,KAAKkE,WAAaA,EAElBlE,KAAK+D,gBACL/D,KAAKoF,sBACLpF,KAAK2G,iBAAiB,IAGxBuB,MAAO,CACLtH,QAAA,SAAQuH,GACNnI,KAAK+G,SAASoB,IAGhBtH,UAAA,SAAUA,GACRb,KAAKmH,MAAM,kBAAmBtG,OChYmU,ICOnW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QCVf,aACE,WAAoB+C,GAAA,KAAAA,SAEpB,KAAAwE,QAAoB,CAClB,CACEC,MAAO,EACPC,SAAU,IACVC,IAAK,MAIT,KAAA5C,OAAsB,CACpB,CACEC,MAAO,IAAIqB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,YACjDpB,QAAS,IAAImB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,cAGzD,SAjBA,GCGA,aACE,WAAoBpG,EAA0B0H,GAA1B,KAAA1H,UAA0B,KAAA0H,YAEtC,KAAA5E,OAAS5D,KAAKwI,UAAUxI,KAAKc,SAAS2B,IA0FhD,OAxFE,YAAAgG,YAAA,SAAY5H,GAYV,IAXA,IAAM6H,EAAmB,CACvB9C,MAAO,IAAIqB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,YACjDpB,QAAS,IAAImB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,aAE/CkB,EAAUvH,EAAUuH,QAAQO,MAAK,SAACC,EAAGC,GAAM,OAAAD,EAAEP,MAAQQ,EAAER,SACvD1C,EAAS9E,EAAU8E,OAErBmD,EAAe,EACbC,EAAapD,EAAOlJ,OAAS,EAC7BuM,EAA2B,G,WAExBpI,GACP,IAAM8E,EAAYC,EAAO/E,EAAU,GACnC,QAAkBoG,IAAdtB,EAAyBsD,EAAYjM,KAAK2L,OACzC,CACCN,EAAQU,IAAiBlI,IAAYwH,EAAQU,GAAcT,OAC7DS,IACF,IAAM/G,EAASqG,EAAQU,EAAe,GAChC,EAAoB,GAAK5F,EAAOD,EAAkBlB,EAAOwG,IACzD,EACJxG,EAAOuG,UACN1H,EAAUmB,EAAOsG,OAAStF,EAAkB,EAEzCkG,EAAiBvD,EAAUE,MAAMsB,KAAI,SAAAgC,GACzC,OAAAA,EAAShC,KAAI,SAAAzB,GACX,OAAA2B,KAAK+B,MAAM,EAAa1D,EAAW,SAGjC2D,EAAmB1D,EAAUI,QAAQoB,KAAI,SAAAmC,GAC7C,OAAAA,EAAWnC,KAAI,SAAAzB,GACb,OAAA2B,KAAK+B,MAAM,EAAa1D,EAAW,SAGvCuD,EAAYjM,KAAK,CACf6I,MAAOqD,EACPnD,QAASsD,MAxBNxI,EAAU,EAAGA,EAAUmI,EAAYnI,I,EAAnCA,GA4BT,OAAOoI,GAGT,YAAA5G,QAAA,SAAQvB,GAAR,WACQmI,EAAchJ,KAAKyI,YAAY5H,GAC/ByI,EAAc,CAClB1D,MAAO,IAAIqB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,YACjDpB,QAAS,IAAImB,MAAMjH,KAAK4D,QAAQqB,KAAK,IAAIiC,KAAI,WAAM,aAG/CjL,EAAkB+M,EAAYO,QAClC,SAACtN,EAAiBuN,GAChB,IAAK,IAAIjN,EAAI,EAAGA,EAAI,EAAKqH,OAAQrH,IAC/BN,EAAK2J,MAAMrJ,GAAKN,EAAK2J,MAAMrJ,GAAGkN,OAAOD,EAAY5D,MAAMrJ,IACvDN,EAAK6J,QAAQvJ,GAAKN,EAAK6J,QAAQvJ,GAAGkN,OAAOD,EAAY1D,QAAQvJ,IAE/D,OAAON,IAETqN,GAGII,EAAUzN,EAAK2J,MAAM2D,QACzB,SAACI,EAAKT,EAAUU,GACd,OAAAD,EACA,EAAKnB,UAAU,EAAK1H,SAAS6B,UAAUiH,GACvC,IACAV,EAASW,KAAK,KACd,MACF,KAGIC,EAAU7N,EAAK6J,QAAQyD,QAC3B,SAACI,EAAKN,EAAYO,GAChB,OAAAD,EACA,EAAKnB,UAAU,EAAK1H,SAAS8B,YAAYgH,GACzC,IACAP,EAAWQ,KAAK,KAChB,MACFH,GAIF,OAAOI,GAGT,YAAAzH,KAAA,SAAKxB,GACH,OAAOkJ,KAAKC,UAAUnJ,IAE1B,EA7FA,GCyEe,SAAIP,OAAO,CACxBjC,KAAM,mBACN4L,WAAY,CACVC,WAAU,GAEZ9G,MAAO,CACL3C,YAAa6C,OACb5C,iBAAkB4C,OAClB3C,aAAc2C,QAEhBrH,KAAA,WACE,IAEI4E,EAFEC,EAAUd,KAAKS,YACfmD,EAASpB,EAAiB1B,GAAS2B,IAEzC,IAII5B,EAFGb,KAAKU,iBAEKqJ,KAAKI,MAAMnK,KAAKU,kBAFS,IAAI0J,EAAiBxG,GAG7D,SACAyG,MAAM,mCACNxJ,EAAY,IAAIuJ,EAAiBxG,GAGnC,MAAO,CACLhD,QAAS,EACTe,SAAU,EACVI,OAAQ,CACNsG,MAAO,EACPC,SAAU,IACVC,IAAK,KAEP1H,UAAWA,EACXC,QAASd,KAAKS,YACd+H,UAAWhG,IAGfsB,QAAS,CACP9C,UAAA,SAAU1B,GACRU,KAAKY,QAAUwG,KAAKC,IAAI,EAAGrH,KAAKY,QAAUtB,IAE5C2B,SAAA,SAAS3B,GACPU,KAAKY,SAAWtB,GAElBoC,WAAA,SAAWpC,GACTU,KAAK2B,SAAWyF,KAAKC,IAAI,EAAGrH,KAAK2B,SAAWrC,GAC5CU,KAAKsK,UAAUtK,KAAK2B,UACpB3B,KAAKY,QAAUZ,KAAKa,UAAUuH,QAAQpI,KAAK2B,SAAW,GAAG0G,OAE3DzG,UAAA,SAAUtC,GACRU,KAAK2B,SAAWyF,KAAKmD,IACnBvK,KAAKa,UAAUuH,QAAQ3L,OACvBuD,KAAK2B,SAAWrC,GAElBU,KAAKsK,UAAUtK,KAAK2B,UACpB3B,KAAKY,QAAUZ,KAAKa,UAAUuH,QAAQpI,KAAK2B,SAAW,GAAG0G,OAE3DiC,UAAA,SAAU3I,GACR,IAAMI,EAAS/B,KAAKa,UAAUuH,QAAQzG,EAAW,GACjD3B,KAAK2B,SAAWA,EAChB3B,KAAK+B,OAASA,GAEhByI,gBAAA,SAAgB3J,GACdb,KAAKa,UAAYA,GAEnBuB,QAAA,WACE,IAAMqI,EAAY,IAAI,EAAezK,KAAKc,QAASd,KAAKwI,WAClDvM,EAAewO,EAAUrI,QAAQpC,KAAKa,WACxC6J,UAAUC,YACZD,UAAUC,UAAUC,UAAU3O,GAC9BoO,MAAM,6BAGVhI,KAAA,WACE,IAAMoI,EAAY,IAAI,EAAezK,KAAKc,QAASd,KAAKwI,WAClDvM,EAAewO,EAAUpI,KAAKrC,KAAKa,WACrC6J,UAAUC,YACZD,UAAUC,UAAUC,UAAU3O,GAC9BoO,MAAM,6BAGV7I,qBAAA,SAAqBZ,GACnB,IAAMiK,EAAS7K,KAAKa,UAAUuH,QAAQlB,KAAI,SAAAnF,GAAU,OAAAA,EAAOsG,SAC3D,OAAOwC,EAAOhD,QAAQjH,IAExBkK,4BAAA,SAA4BlK,GAC1B,IAAMiK,EAAS7K,KAAKa,UAAUuH,QAAQlB,KAAI,SAAAnF,GAAU,OAAAA,EAAOsG,SACrD1G,EAAWkJ,EAAOtB,QACtB,SAACwB,EAAK1C,GAAU,OAACA,GAASzH,EAAUmK,EAAM,EAAIA,IAC9C,GAEF,OAAOpJ,GAETqJ,eAAA,SAAepK,EAAiBqK,GAC9B,GAAIA,EAAW,CAEb,IAAMtJ,EAAW3B,KAAKwB,qBAAqBZ,GAC3CZ,KAAKa,UAAUuH,QAAQzK,OAAOgE,EAAU,GACxC3B,KAAK2B,WACL3B,KAAK+B,OAAS/B,KAAKa,UAAUuH,QAAQpI,KAAK2B,SAAW,OAChD,CAEL,IAAMuJ,EAAYlL,KAAK+B,OACjBoJ,EAAoB,GAAKjI,EAAOD,EAAkBiI,EAAU3C,IAC5D6C,EACJF,EAAU5C,UACT1H,EAAUsK,EAAU7C,OAAStF,EAAkBoI,EAC5CE,EAAoB,CACxBhD,MAAOzH,EACP0H,SAAU8C,EACV7C,IAAK2C,EAAU3C,KAEjBvI,KAAKa,UAAUuH,QAAQzK,OAAOqC,KAAK2B,SAAU,EAAG0J,GAChDrL,KAAK+B,OAASsJ,EACdrL,KAAK2B,aAGTF,mBAAA,WACE,IAAMb,EAAUZ,KAAKY,QACfqK,GAAoD,IAAxCjL,KAAKwB,qBAAqBZ,GAC5CZ,KAAKgL,eAAepK,EAASqK,GAC7BjL,KAAKY,QAAUA,IAGnBsH,MAAO,CACLtH,QAAA,SAAQuH,GACN,IAAMxG,EAAW3B,KAAK8K,4BAA4B3C,GAClDnI,KAAK2B,SAAWA,EAChB3B,KAAKsK,UAAU3I,OCpNwV,ICOzW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QCJA,SAAIrB,OAAO,CACxBjC,KAAM,SACN4L,WAAY,CACVqB,iBAAgB,GAElBlI,MAAO,CACL1C,iBAAkB4C,OAClB3C,aAAc2C,OACd7C,YAAa6C,UCtBmU,ICOhV,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QClBX,EAAS,WAAa,IAAIvD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,UAAU,CAACL,EAAG,eAAe,IAC/I,EAAkB,GCDlB,EAAS,WAAa,IAAIJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,oBAAoB,CAACL,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,gBAAgB,CAACT,EAAIoB,GAAG,4BAA4BhB,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,eAAe,CAACL,EAAG,iBAAiB,CAACK,MAAM,CAAC,IAAMT,EAAIwL,YAAYxK,GAAG,CAAC,YAAchB,EAAIyL,sBAAsBrL,EAAG,iBAAiB,CAACK,MAAM,CAAC,IAAMT,EAAI0L,YAAY1K,GAAG,CAAC,YAAchB,EAAI2L,sBAAsBvL,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,kBAAkB,CAACL,EAAG,SAAS,CAAC0B,WAAW,CAAC,CAACxD,KAAK,QAAQyD,QAAQ,UAAUhD,MAAOiB,EAAe,YAAEiC,WAAW,gBAAgBd,YAAY,iCAAiCV,MAAM,CAAC,GAAK,sBAAsBO,GAAG,CAAC,OAAS,SAASK,GAAQ,IAAIuK,EAAgB1E,MAAMtK,UAAUuJ,OAAOrJ,KAAKuE,EAAOa,OAAO2J,SAAQ,SAASrN,GAAG,OAAOA,EAAEsN,YAAW3E,KAAI,SAAS3I,GAAG,IAAIuN,EAAM,WAAYvN,EAAIA,EAAEwN,OAASxN,EAAEO,MAAM,OAAOgN,KAAO/L,EAAIU,YAAYW,EAAOa,OAAO+J,SAAWL,EAAgBA,EAAc,MAAM,CAACxL,EAAG,SAAS,CAACJ,EAAIoB,GAAG,OAAOhB,EAAG,SAAS,CAACJ,EAAIoB,GAAG,OAAOhB,EAAG,SAAS,CAACJ,EAAIoB,GAAG,UAAUhB,EAAG,cAAc,CAACe,YAAY,uBAAuBV,MAAM,CAAC,GAAK,CACnkCnC,KAAM,SACN4N,KAAM,SACNC,OAAQ,CACNrL,UAAWd,EAAIoM,aACfC,SAAUrM,EAAIqM,UAEhBC,MAAO,CAAEjN,IAAKW,EAAIU,gBAChB,CAACV,EAAIoB,GAAG,aAAa,GAAGhB,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,kBAAkB,CAACT,EAAIoB,GAAG,+BAA+B,MAC/G,EAAkB,GCTlB,EAAS,WAAa,IAAIpB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,sBAAsBO,GAAG,CAAC,SAAW,SAASK,GAAgC,OAAxBA,EAAOkB,iBAAwBvC,EAAIuM,WAAWlL,IAAS,KAAO,SAASA,GAAgC,OAAxBA,EAAOkB,iBAAwBvC,EAAIwM,OAAOnL,MAAW,CAACjB,EAAG,MAAM,CAACe,YAAY,wDAAwDV,MAAM,CAAC,iBAAiB,KAAK,CAACL,EAAG,QAAQ,CAACmB,IAAI,QAAQd,MAAM,CAAC,KAAO,QAAQO,GAAG,CAAC,OAAShB,EAAIyM,YAAYrM,EAAG,OAAO,CAACK,MAAM,CAAC,UAAU,kBAAkBL,EAAG,OAAO,CAACe,YAAY,kBAAkB,CAACnB,EAAIoB,GAAG,IAAIpB,EAAIsB,GAAGtB,EAAI0M,KAAK,OAAOtM,EAAG,OAAO,CAACe,YAAY,WAAW,CAACnB,EAAIoB,GAAG,aACxoB,EAAkB,GCyBP,SAAIb,OAAO,CACxBjC,KAAM,gBACN+E,MAAO,CACLqJ,IAAKnJ,QAEPrH,KAAA,WACE,MAAO,CACLyQ,IAAK1M,KACL2M,KAAM,OAGV7I,QAAS,CACPwI,WAAA,SAAW9E,GACLA,EAAEoF,eAAcpF,EAAEoF,aAAaC,WAAa,SAElDN,OAAA,SAAO/E,GACL,GAAIA,EAAEoF,aAAc,CAClB,IAAMD,EAAOnF,EAAEoF,aAAaE,MAAM,IAAM,KACxC9M,KAAK2M,KAAOA,OAEZ3M,KAAK2M,KAAO,MAGhBH,SAAA,SAAShF,GACP,GAAIA,EAAEvF,kBAAkB8K,iBAAkB,CACxC,IAAMJ,EAAOnF,EAAEvF,OAAO6K,MAAQtF,EAAEvF,OAAO6K,MAAM,GAAK,KAClD9M,KAAK2M,KAAOA,OAEZ3M,KAAK2M,KAAO,OAIlBzE,MAAO,CACLyE,KAAA,SAAKK,GACe,OAAZA,EACJhN,KAAKmH,MAAM,cAAe6F,GAE1B3C,MAAM,wBC/D4V,ICOtW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QCsCA,SAAI/J,OAAO,CACxBjC,KAAM,YACN4L,WAAY,CACVgD,cAAa,GAEfhR,KAAA,WACE,MAAO,CACLsP,WAAY,cACZE,WAAY,cACZhL,YAAa,IACb2L,SAAU,KACVD,aAAc,OAGlBrI,QAAS,CACP0H,mBAAA,SAAmBmB,GAAnB,WACQO,EAAkB,UACxB,GAAKP,EAAKnJ,KAAK2J,MAAMD,GAEhB,CACH,IAAM,EAAS,IAAIE,WACnB,EAAOC,OAAS,WACd,IAAM/P,EAAS,EAAOA,OACD,iBAAVA,IACT,EAAK8O,SAAW9O,EAChB,EAAKiO,WAAaoB,EAAKtO,OAG3B,EAAOiP,cAAcX,QAVrBtC,MAAM,mBAaVqB,mBAAA,SAAmBiB,GAAnB,WACQO,EAAkB,gCACxB,GAAKP,EAAKnJ,KAAK2J,MAAMD,GAEhB,CACH,IAAM,EAAS,IAAIE,WACnB,EAAOC,OAAS,WACd,IAAM/P,EAAS,EAAOA,OACD,iBAAVA,IACT,EAAK6O,aAAe7O,EACpB,EAAKmO,WAAakB,EAAKtO,OAG3B,EAAOkP,WAAWZ,QAVlBtC,MAAM,sBC1FwV,ICOlW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,K,QCRA,UAAI/J,OAAO,CACxBjC,KAAM,QACN4L,WAAY,CACVuD,UAAS,MCbsU,MCO/U,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIa,M,qBCZf,OAAIC,OAAOC,eAAgB,EAE3B,OAAIC,IAAI,SAQO,WAAI,QAAO,CACxBC,OAAQ,CACN,CACE3B,KAAM,IACN5N,KAAM,QACNkC,UAAWsN,IAEb,CACE5B,KAAM,UACN5N,KAAM,SACNkC,UAAWuN,EACX1K,MAAA,SAAMwK,GACJ,MAAO,CACLlN,iBAAkBkN,EAAO1B,OAAOrL,UAChCF,aAAciN,EAAO1B,OAAOE,SAC5B3L,YAAcmN,EAAOvB,MAAMjN,KAAO,U,oECtB5C,KAAMuO,IAAI,MAEV,OAAIF,OAAOC,eAAgB,EAE3B,IAAI,OAAI,CACNK,OAAM,GACNjO,OAAQ,SAAAkO,GAAK,OAAAA,EAAEC,MACdC,OAAO","file":"js/app.a711f60f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\n\r\nexport default Vue.extend({\r\n  name: \"App\"\r\n});\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--13-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--13-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=dfedde86&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"editor\"}},[_c('editor-controller',{attrs:{\"selected-key\":_vm.selectedKey,\"load-score-data-str\":_vm.loadScoreDataStr,\"load-music-url\":_vm.loadMusicUrl}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"editor-controller\"}},[_c('editor-main',{attrs:{\"page-num\":_vm.pageNum,\"load-score-data\":_vm.scoreData,\"selected-key\":_vm.keyKind},on:{\"page-minus\":_vm.pageMinus,\"page-plus\":_vm.pagePlus}}),_c('div',{attrs:{\"id\":\"editor-menu\"}},[_c('div',{staticClass:\"menu-item-container\",attrs:{\"id\":\"menu-page\"}},[_c('div',{staticClass:\"menu-txt\"},[_vm._v(\"Page\")]),_c('div',{staticClass:\"menu-move-display\"},[_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.pageMinus(5)}}},[_vm._v(\"◁\")]),_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.pageMinus(1)}}},[_vm._v(\"◁\")]),_c('div',{staticClass:\"menu-move-txt\"},[_vm._v(_vm._s(_vm.pageNum))]),_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.pagePlus(1)}}},[_vm._v(\"▷\")]),_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.pagePlus(5)}}},[_vm._v(\"▷\")])])]),_c('div',{staticClass:\"menu-item-container\",attrs:{\"id\":\"menu-label\"}},[_c('div',{attrs:{\"id\":\"menu-move-header\"}},[_c('div',{staticClass:\"menu-txt\"},[_vm._v(\"Label\")]),_c('input',{ref:\"label-checkbox\",staticClass:\"uk-checkbox\",attrs:{\"id\":\"menu-label-checkbox\",\"type\":\"checkbox\",\"disabled\":_vm.pageNum === 1},domProps:{\"checked\":_vm.getLabelNumByPageNum(_vm.pageNum) !== -1},on:{\"click\":_vm.callLabelOperation}})]),_c('div',{staticClass:\"menu-move-display\"},[_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.labelMinus(5)}}},[_vm._v(\"◁\")]),_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.labelMinus(1)}}},[_vm._v(\"◁\")]),_c('div',{staticClass:\"menu-move-txt\"},[_vm._v(_vm._s(_vm.labelNum))]),_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.labelPlus(1)}}},[_vm._v(\"▷\")]),_c('div',{staticClass:\"menu-move-btn\",on:{\"click\":function($event){return _vm.labelPlus(5)}}},[_vm._v(\"▷\")])])]),_c('div',{staticClass:\"menu-item-container\",attrs:{\"id\":\"menu-fn\"}},[_c('div',{staticClass:\"menu-txt\"},[_vm._v(\"First Number\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.timing.firstNum),expression:\"timing.firstNum\"}],staticClass:\"uk-input uk-form-small\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.timing.firstNum)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.timing, \"firstNum\", $event.target.value)}}})]),_c('div',{staticClass:\"menu-item-container\",attrs:{\"id\":\"menu-bpm\"}},[_c('div',{staticClass:\"menu-txt\"},[_vm._v(\"BPM\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.timing.bpm),expression:\"timing.bpm\"}],staticClass:\"uk-input uk-form-small\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.timing.bpm)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.timing, \"bpm\", $event.target.value)}}})]),_c('div',{staticClass:\"menu-item-container\",attrs:{\"id\":\"menu-output\"}},[_c('div',{staticClass:\"menu-output-btn btn-red\",on:{\"click\":_vm.convert}},[_vm._v(\"GO\")]),_c('div',{staticClass:\"menu-output-btn btn-blue\",on:{\"click\":_vm.save}},[_vm._v(\"SAVE\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"canvas\",attrs:{\"id\":\"canvas\",\"tabindex\":\"-1\"},on:{\"keydown\":function($event){$event.preventDefault();return _vm.keydownAction($event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { KeyKind } from \"./KeyKind\";\r\n\r\nexport type KeyConfig = {\r\n  [keyKind in KeyKind]: {\r\n    num: number;\r\n    keys: string[];\r\n    noteNames: string[];\r\n    freezeNames: string[];\r\n  };\r\n};\r\n\r\nexport const DefaultKeyConfig: KeyConfig = {\r\n  \"5\": {\r\n    num: 5,\r\n    keys: [\"KeyJ\", \"KeyK\", \"KeyI\", \"KeyL\", \"KeyF\"],\r\n    noteNames: [\r\n      \"left_data\",\r\n      \"down_data\",\r\n      \"up_data\",\r\n      \"right_data\",\r\n      \"space_data\"\r\n    ],\r\n    freezeNames: [\r\n      \"frzLeft_data\",\r\n      \"frzDown_data\",\r\n      \"frzUp_data\",\r\n      \"frzRight_data\",\r\n      \"frzSpace_data\"\r\n    ]\r\n  },\r\n  \"7\": {\r\n    num: 7,\r\n    keys: [\"KeyS\", \"KeyD\", \"KeyF\", \"KeyG\", \"KeyJ\", \"KeyK\", \"KeyL\"],\r\n    noteNames: [\r\n      \"left_data\",\r\n      \"leftdia_data\",\r\n      \"down_data\",\r\n      \"space_data\",\r\n      \"up_data\",\r\n      \"rightdia_data\",\r\n      \"right_data\"\r\n    ],\r\n    freezeNames: [\r\n      \"frzLeft_data\",\r\n      \"frzLeftdia_data\",\r\n      \"frzDown_data\",\r\n      \"frzSpace_data\",\r\n      \"frzUp_data\",\r\n      \"frzRightdia_data\",\r\n      \"frzRight_data\"\r\n    ]\r\n  },\r\n  \"11\": {\r\n    num: 11,\r\n    keys: [\r\n      \"KeyS\",\r\n      \"KeyD\",\r\n      \"KeyF\",\r\n      \"KeyG\",\r\n      \"KeyJ\",\r\n      \"KeyK\",\r\n      \"KeyL\",\r\n      \"KeyU\",\r\n      \"KeyI\",\r\n      \"Digit8\",\r\n      \"KeyO\"\r\n    ],\r\n    noteNames: [\r\n      \"left_data\",\r\n      \"leftdia_data\",\r\n      \"down_data\",\r\n      \"space_data\",\r\n      \"up_data\",\r\n      \"rightdia_data\",\r\n      \"right_data\",\r\n      \"sleft_data\",\r\n      \"sdown_data\",\r\n      \"sup_data\",\r\n      \"sright_data\"\r\n    ],\r\n    freezeNames: [\r\n      \"frzLeft_data\",\r\n      \"frzLeftdia_data\",\r\n      \"frzDown_data\",\r\n      \"frzSpace_data\",\r\n      \"frzUp_data\",\r\n      \"frzRightdia_data\",\r\n      \"frzRight_data\",\r\n      \"sfrzLeft_data\",\r\n      \"sfrzDown_data\",\r\n      \"sfrzUp_data\",\r\n      \"sfrzRight_data\"\r\n    ]\r\n  }\r\n};\r\n","export const noteWidth = 30;\r\nexport const noteHeight = 5;\r\nexport const verticalSizeNum = 384;\r\nexport const editorHeight = verticalSizeNum;\r\nexport const quarterInterval = verticalSizeNum / 8;\r\nexport const fps = 60;\r\n\r\nexport const canvasMargin = 20;\r\n","\n\n\n\n\n\n\n\n\n\r\nimport Vue, { PropType } from \"vue\";\r\nimport Konva from \"konva\";\r\nimport { DefaultKeyConfig } from \"@/model/KeyConfig\";\r\nimport { ScoreData } from \"@/model/ScoreData\";\r\nimport { KeyKind } from \"@/model/KeyKind\";\r\nimport { PageScore } from \"@/model/PageScore\";\r\nimport {\r\n  noteWidth,\r\n  editorHeight,\r\n  verticalSizeNum,\r\n  quarterInterval,\r\n  noteHeight,\r\n  canvasMargin\r\n} from \"./EditorConstant\";\r\n\r\ntype DataType = {\r\n  currentPosition: number;\r\n  scoreData: ScoreData;\r\n  divisor: number;\r\n  keyKind: KeyKind;\r\n  keyNum: number;\r\n  page: number;\r\n  editorWidth: number;\r\n  stage?: Konva.Stage;\r\n  baseLayer?: Konva.Layer;\r\n  notesLayer?: Konva.Layer;\r\n  currentPositionLayer?: Konva.Layer;\r\n};\r\n\r\nexport default Vue.extend({\r\n  name: \"EditorMain\",\r\n  props: {\r\n    pageNum: Number,\r\n    selectedKey: String,\r\n    loadScoreData: { type: Object as PropType<ScoreData> }\r\n  },\r\n  data(): DataType {\r\n    const keyKind = this.selectedKey as KeyKind;\r\n    return {\r\n      currentPosition: 0,\r\n      scoreData: this.loadScoreData,\r\n      divisor: 24,\r\n      keyKind: keyKind,\r\n      page: 1,\r\n      keyNum: DefaultKeyConfig[keyKind].num,\r\n      editorWidth: noteWidth * DefaultKeyConfig[keyKind].num\r\n    };\r\n  },\r\n  methods: {\r\n    // ベースレイヤーの描画\r\n    baseLayerDraw(): void {\r\n      const divisor = this.divisor;\r\n      const keyNum = this.keyNum;\r\n      const editorWidth = this.editorWidth;\r\n\r\n      const stage = this.stage as Konva.Stage;\r\n      const baseLayer = this.baseLayer as Konva.Layer;\r\n      const notesLayer = this.notesLayer as Konva.Layer;\r\n      const currentPositionLayer = this.currentPositionLayer as Konva.Layer;\r\n\r\n      baseLayer.destroyChildren();\r\n\r\n      // 縦罫線の描画\r\n      for (let i = 0; i < keyNum; i++) {\r\n        const xPos = (i + 1) * noteWidth;\r\n        const line = new Konva.Line({\r\n          points: [xPos, 0, xPos, editorHeight],\r\n          stroke: \"#969696\",\r\n          strokeWidth: 0.5\r\n        });\r\n        baseLayer.add(line);\r\n\r\n        if (i % 2 == 1) {\r\n          const filler = new Konva.Rect({\r\n            x: xPos - noteWidth,\r\n            width: noteWidth,\r\n            height: editorHeight,\r\n            fill: \"#c3f3ff\",\r\n            strokeWidth: 0\r\n          });\r\n          baseLayer.add(filler);\r\n        }\r\n      }\r\n\r\n      // 横罫線の描画\r\n      for (let i = 0; i < verticalSizeNum / divisor; i++) {\r\n        const yPos = (i + 1) * divisor;\r\n        const line = new Konva.Line({\r\n          points: [0, yPos, editorWidth, yPos],\r\n          stroke: \"#969696\",\r\n          strokeWidth: (divisor * (i + 1)) % quarterInterval == 0 ? 1 : 0.5\r\n        });\r\n        baseLayer.add(line);\r\n      }\r\n\r\n      // 枠線の描画\r\n      const rect = new Konva.Rect({\r\n        width: editorWidth,\r\n        height: editorHeight,\r\n        stroke: \"black\",\r\n        strokeWidth: 1\r\n      });\r\n      baseLayer.add(rect);\r\n\r\n      stage.add(baseLayer);\r\n      stage.add(notesLayer);\r\n      stage.add(currentPositionLayer);\r\n    },\r\n\r\n    // 現在位置の描画\r\n    currentPositionDraw(): void {\r\n      const stage = this.stage as Konva.Stage;\r\n      const currentPositionLayer = this.currentPositionLayer as Konva.Layer;\r\n      currentPositionLayer.destroyChildren();\r\n\r\n      const currentPositionLine = new Konva.Line({\r\n        y: editorHeight - this.currentPosition,\r\n        points: [0, 0, this.editorWidth, 0],\r\n        stroke: \"#ffff00\",\r\n        strokeWidth: 1.5\r\n      });\r\n      currentPositionLayer.add(currentPositionLine);\r\n      stage.add(currentPositionLayer);\r\n    },\r\n\r\n    // ノーツの有無の判定\r\n    hasNote(page: number, lane: number, position: number): boolean {\r\n      const pageScore = this.scoreData.scores[this.page - 1];\r\n      return (\r\n        pageScore.notes[lane].includes(position) ||\r\n        pageScore.freezes[lane].includes(position)\r\n      );\r\n    },\r\n\r\n    // ノーツの追加\r\n    noteAdd(\r\n      page: number,\r\n      lane: number,\r\n      position: number,\r\n      isFreeze: boolean\r\n    ): void {\r\n      if (isFreeze)\r\n        this.scoreData.scores[page - 1].freezes[lane].push(position);\r\n      else this.scoreData.scores[page - 1].notes[lane].push(position);\r\n    },\r\n\r\n    // ノーツの削除\r\n    noteRemove(page: number, lane: number, position: number): void {\r\n      this.scoreData.scores[page - 1].freezes[lane] = this.scoreData.scores[\r\n        page - 1\r\n      ].freezes[lane].filter(pos => pos !== position);\r\n      this.scoreData.scores[page - 1].notes[lane] = this.scoreData.scores[\r\n        page - 1\r\n      ].notes[lane].filter(pos => pos !== position);\r\n    },\r\n\r\n    // ノーツの描画\r\n    noteDraw(lane: number, position: number, isFreeze: boolean): void {\r\n      const stage = this.stage as Konva.Stage;\r\n      const notesLayer = this.notesLayer as Konva.Layer;\r\n\r\n      // Todo: 色設定作る\r\n      const color = ((lane: number, isFreeze: boolean) => {\r\n        if (isFreeze) {\r\n          return lane % 2 == 0 ? \"#ff4dd2\" : \"#00ffff\";\r\n        } else {\r\n          return lane % 2 == 0 ? \"red\" : \"blue\";\r\n        }\r\n      })(lane, isFreeze);\r\n\r\n      const note = new Konva.Rect({\r\n        x: lane * noteWidth,\r\n        y: editorHeight - position - noteHeight / 2,\r\n        width: noteWidth,\r\n        height: noteHeight,\r\n        fill: color,\r\n        id: `note-${lane}-${position}`\r\n      });\r\n      notesLayer.add(note);\r\n      stage.add(notesLayer);\r\n    },\r\n\r\n    // ノーツのクリア\r\n    noteClear(lane: number, position: number): void {\r\n      const stage = this.stage as Konva.Stage;\r\n      const notesLayer = this.notesLayer as Konva.Layer;\r\n\r\n      const note = notesLayer.findOne(`#note-${lane}-${position}`);\r\n      note.destroy();\r\n      stage.add(notesLayer);\r\n    },\r\n\r\n    // 譜面データのページ反映\r\n    displayPageScore(page: number): void {\r\n      const stage = this.stage as Konva.Stage;\r\n      const notesLayer = this.notesLayer as Konva.Layer;\r\n\r\n      const pageScore = this.scoreData.scores[page - 1];\r\n\r\n      notesLayer.destroyChildren();\r\n      stage.add(notesLayer);\r\n\r\n      pageScore.notes.forEach((laneArr, lane) => {\r\n        laneArr.forEach(position => {\r\n          this.noteDraw(lane, position, false);\r\n        });\r\n      });\r\n      pageScore.freezes.forEach((laneArr, lane) => {\r\n        laneArr.forEach(position => {\r\n          this.noteDraw(lane, position, true);\r\n        });\r\n      });\r\n    },\r\n\r\n    // 現在位置移動\r\n    currentPositionMove(position: number) {\r\n      this.currentPosition = position;\r\n      this.currentPositionDraw();\r\n    },\r\n\r\n    // ページ遷移\r\n    pageMove(page: number): void {\r\n      this.page = page;\r\n      this.currentPositionMove(0);\r\n\r\n      const pageScore: PageScore = this.scoreData.scores[page - 1];\r\n      if (pageScore === undefined) {\r\n        this.scoreData.scores[page - 1] = {\r\n          notes: new Array(this.keyNum).fill([]).map(() => []),\r\n          freezes: new Array(this.keyNum).fill([]).map(() => [])\r\n        };\r\n      }\r\n      this.displayPageScore(page);\r\n    },\r\n    pageMinus(n: number): void {\r\n      this.$emit(\"page-minus\", n);\r\n      Math.max(1, this.page - n);\r\n      this.pageMove(this.page);\r\n    },\r\n    pagePlus(n: number): void {\r\n      this.$emit(\"page-plus\", n);\r\n      this.page += n;\r\n      this.pageMove(this.page);\r\n    },\r\n\r\n    // 移動間隔変更\r\n    changeDivisor(divisor: number) {\r\n      this.divisor = divisor;\r\n      if (this.currentPosition % divisor !== 0) {\r\n        this.currentPositionMove(\r\n          Math.floor(this.currentPosition / divisor) * divisor\r\n        );\r\n      }\r\n      this.baseLayerDraw();\r\n    },\r\n\r\n    // キーを押したときの挙動\r\n    keydownAction(e: KeyboardEvent): void {\r\n      if (e.ctrlKey) {\r\n        switch (e.code) {\r\n          case \"Digit1\":\r\n            this.changeDivisor(quarterInterval);\r\n            break;\r\n          case \"Digit2\":\r\n            this.changeDivisor(quarterInterval / 2);\r\n            break;\r\n          case \"Digit3\":\r\n            this.changeDivisor(quarterInterval / 4);\r\n            break;\r\n          case \"Digit4\":\r\n            this.changeDivisor(quarterInterval / 3);\r\n            break;\r\n          case \"Digit5\":\r\n            this.changeDivisor(quarterInterval / 6);\r\n            break;\r\n          case \"Digit6\":\r\n            this.changeDivisor(quarterInterval / 12);\r\n            break;\r\n          case \"Digit7\":\r\n            this.changeDivisor(quarterInterval / 8);\r\n            break;\r\n        }\r\n      } else {\r\n        switch (e.code) {\r\n          case \"Space\":\r\n            this.currentPosition += this.divisor;\r\n            if (this.currentPosition >= verticalSizeNum) this.pagePlus(1);\r\n            else this.currentPositionMove(this.currentPosition);\r\n            break;\r\n          case \"ArrowUp\":\r\n            this.currentPosition += this.divisor;\r\n            if (this.currentPosition >= verticalSizeNum) this.pagePlus(1);\r\n            else this.currentPositionMove(this.currentPosition);\r\n            break;\r\n          case \"ArrowDown\":\r\n            this.currentPosition -= this.divisor;\r\n            if (this.currentPosition < 0) {\r\n              if (this.page === 1) this.currentPosition = 0;\r\n              else this.pageMinus(1);\r\n            } else this.currentPositionMove(this.currentPosition);\r\n            break;\r\n          case \"ArrowLeft\":\r\n            if (e.shiftKey) this.pageMinus(5);\r\n            else this.pageMinus(1);\r\n            break;\r\n          case \"ArrowRight\":\r\n            if (e.shiftKey) this.pagePlus(5);\r\n            else this.pagePlus(1);\r\n            break;\r\n          default: {\r\n            const possiblyLane = DefaultKeyConfig[this.keyKind].keys.indexOf(\r\n              e.code\r\n            );\r\n            const isFreeze = e.shiftKey;\r\n\r\n            if (possiblyLane >= 0) {\r\n              if (this.hasNote(this.page, possiblyLane, this.currentPosition)) {\r\n                this.noteRemove(this.page, possiblyLane, this.currentPosition);\r\n                this.noteClear(possiblyLane, this.currentPosition);\r\n              } else {\r\n                this.noteAdd(\r\n                  this.page,\r\n                  possiblyLane,\r\n                  this.currentPosition,\r\n                  isFreeze\r\n                );\r\n                this.noteDraw(possiblyLane, this.currentPosition, isFreeze);\r\n              }\r\n\r\n              this.currentPosition += this.divisor;\r\n              if (this.currentPosition >= verticalSizeNum) this.pagePlus(1);\r\n              else this.currentPositionMove(this.currentPosition);\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted(): void {\r\n    const stage = new Konva.Stage({\r\n      x: canvasMargin,\r\n      y: canvasMargin,\r\n      container: \"canvas\",\r\n      width: this.editorWidth + canvasMargin * 2,\r\n      height: editorHeight + canvasMargin * 2\r\n    });\r\n    const baseLayer = new Konva.Layer({\r\n      container: \"baseLayer\"\r\n    });\r\n    const currentPositionLayer = new Konva.Layer({\r\n      container: \"currentPositionLayer\"\r\n    });\r\n    const notesLayer = new Konva.Layer({\r\n      container: \"notesLayer\"\r\n    });\r\n\r\n    this.stage = stage;\r\n    this.baseLayer = baseLayer;\r\n    this.currentPositionLayer = currentPositionLayer;\r\n    this.notesLayer = notesLayer;\r\n\r\n    this.baseLayerDraw();\r\n    this.currentPositionDraw();\r\n    this.displayPageScore(1);\r\n  },\r\n\r\n  watch: {\r\n    pageNum(newPage: number): void {\r\n      this.pageMove(newPage);\r\n    },\r\n\r\n    scoreData(scoreData: ScoreData): void {\r\n      this.$emit(\"changeScoreData\", scoreData);\r\n    }\r\n  }\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorMain.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorMain.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EditorMain.vue?vue&type=template&id=027d5704&\"\nimport script from \"./EditorMain.vue?vue&type=script&lang=ts&\"\nexport * from \"./EditorMain.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Timing } from \"./Timing\";\r\nimport { PageScore } from \"./PageScore\";\r\n\r\nexport interface ScoreData {\r\n  timings: Timing[];\r\n  scores: PageScore[];\r\n}\r\n\r\nexport class DefaultScoreData implements ScoreData {\r\n  constructor(private keyNum: number) {}\r\n\r\n  timings: Timing[] = [\r\n    {\r\n      label: 1,\r\n      firstNum: 200,\r\n      bpm: 140\r\n    }\r\n  ];\r\n\r\n  scores: PageScore[] = [\r\n    {\r\n      notes: new Array(this.keyNum).fill([]).map(() => []),\r\n      freezes: new Array(this.keyNum).fill([]).map(() => [])\r\n    }\r\n  ];\r\n}\r\n","import { KeyConfig } from \"@/model/KeyConfig\";\r\nimport { ScoreData } from \"@/model/ScoreData\";\r\nimport { KeyKind } from \"@/model/KeyKind\";\r\nimport { PageScore } from \"@/model/PageScore\";\r\nimport { quarterInterval, verticalSizeNum, fps } from \"./EditorConstant\";\r\n\r\nexport type FrameData = {\r\n  notes: number[][];\r\n  freezes: number[][];\r\n};\r\n\r\nexport class ScoreConverter {\r\n  constructor(private keyKind: KeyKind, private keyConfig: KeyConfig) {}\r\n\r\n  private keyNum = this.keyConfig[this.keyKind].num;\r\n\r\n  toFrameData(scoreData: ScoreData): FrameData[] {\r\n    const initialPageScore = {\r\n      notes: new Array(this.keyNum).fill([]).map(() => []),\r\n      freezes: new Array(this.keyNum).fill([]).map(() => [])\r\n    };\r\n    const timings = scoreData.timings.sort((a, b) => a.label - b.label);\r\n    const scores = scoreData.scores;\r\n\r\n    let labelCounter = 0;\r\n    const maxPageNum = scores.length + 1;\r\n    const frameScores: PageScore[] = [];\r\n\r\n    for (let pageNum = 1; pageNum < maxPageNum; pageNum++) {\r\n      const pageScore = scores[pageNum - 1];\r\n      if (pageScore === undefined) frameScores.push(initialPageScore);\r\n      else {\r\n        if (timings[labelCounter] && pageNum === timings[labelCounter].label)\r\n          labelCounter++;\r\n        const timing = timings[labelCounter - 1];\r\n        const framePerPosition = (60 * fps) / quarterInterval / timing.bpm;\r\n        const startFrame =\r\n          timing.firstNum +\r\n          (pageNum - timing.label) * verticalSizeNum * framePerPosition;\r\n\r\n        const pageNoteFrames = pageScore.notes.map(notesArr =>\r\n          notesArr.map(position =>\r\n            Math.round(startFrame + position * framePerPosition)\r\n          )\r\n        );\r\n        const freezeNoteFrames = pageScore.freezes.map(freezesArr =>\r\n          freezesArr.map(position =>\r\n            Math.round(startFrame + position * framePerPosition)\r\n          )\r\n        );\r\n        frameScores.push({\r\n          notes: pageNoteFrames,\r\n          freezes: freezeNoteFrames\r\n        });\r\n      }\r\n    }\r\n    return frameScores;\r\n  }\r\n\r\n  convert(scoreData: ScoreData): string {\r\n    const frameScores = this.toFrameData(scoreData);\r\n    const initialData = {\r\n      notes: new Array(this.keyNum).fill([]).map(() => []),\r\n      freezes: new Array(this.keyNum).fill([]).map(() => [])\r\n    };\r\n\r\n    const data: FrameData = frameScores.reduce(\r\n      (data: FrameData, currentPage) => {\r\n        for (let i = 0; i < this.keyNum; i++) {\r\n          data.notes[i] = data.notes[i].concat(currentPage.notes[i]);\r\n          data.freezes[i] = data.freezes[i].concat(currentPage.freezes[i]);\r\n        }\r\n        return data;\r\n      },\r\n      initialData\r\n    );\r\n\r\n    const noteStr = data.notes.reduce(\r\n      (str, notesArr, laneNum) =>\r\n        str +\r\n        this.keyConfig[this.keyKind].noteNames[laneNum] +\r\n        \"=\" +\r\n        notesArr.join(\",\") +\r\n        \"|\",\r\n      \"|\"\r\n    );\r\n\r\n    const dataStr = data.freezes.reduce(\r\n      (str, freezesArr, laneNum) =>\r\n        str +\r\n        this.keyConfig[this.keyKind].freezeNames[laneNum] +\r\n        \"=\" +\r\n        freezesArr.join(\",\") +\r\n        \"|\",\r\n      noteStr\r\n    );\r\n\r\n    //Todo: 速度変化なんとかする\r\n    return dataStr;\r\n  }\r\n\r\n  save(scoreData: ScoreData): string {\r\n    return JSON.stringify(scoreData);\r\n  }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport EditorMain from \"./EditorMain.vue\";\r\nimport { Timing } from \"../../model/Timing\";\r\nimport { ScoreData, DefaultScoreData } from \"../../model/ScoreData\";\r\nimport { ScoreConverter } from \"./ScoreConverter\";\r\nimport { KeyKind } from \"../../model/KeyKind\";\r\nimport { KeyConfig, DefaultKeyConfig } from \"../../model/KeyConfig\";\r\nimport { fps, quarterInterval, verticalSizeNum } from \"./EditorConstant\";\r\n\r\ntype DataType = {\r\n  pageNum: number;\r\n  labelNum: number;\r\n  timing: Timing;\r\n  scoreData: ScoreData;\r\n  keyKind: KeyKind;\r\n  keyConfig: KeyConfig;\r\n};\r\n\r\nexport default Vue.extend({\r\n  name: \"EditorController\",\r\n  components: {\r\n    EditorMain\r\n  },\r\n  props: {\r\n    selectedKey: String,\r\n    loadScoreDataStr: String,\r\n    loadMusicUrl: String\r\n  },\r\n  data(): DataType {\r\n    const keyKind = this.selectedKey as KeyKind;\r\n    const keyNum = DefaultKeyConfig[keyKind].num;\r\n    let scoreData;\r\n    try {\r\n      //TODO: 譜面データのチェッカーを作る\r\n      if (!this.loadScoreDataStr) scoreData = new DefaultScoreData(keyNum);\r\n      else\r\n        scoreData = (JSON.parse(this.loadScoreDataStr) as unknown) as ScoreData;\r\n    } catch {\r\n      alert(\"不正な譜面データが与えられたため、正しく読み込めませんでした。\");\r\n      scoreData = new DefaultScoreData(keyNum);\r\n    }\r\n\r\n    return {\r\n      pageNum: 1,\r\n      labelNum: 1,\r\n      timing: {\r\n        label: 1,\r\n        firstNum: 200,\r\n        bpm: 140\r\n      },\r\n      scoreData: scoreData,\r\n      keyKind: this.selectedKey as KeyKind,\r\n      keyConfig: DefaultKeyConfig\r\n    };\r\n  },\r\n  methods: {\r\n    pageMinus(n: number): void {\r\n      this.pageNum = Math.max(1, this.pageNum - n);\r\n    },\r\n    pagePlus(n: number): void {\r\n      this.pageNum += n;\r\n    },\r\n    labelMinus(n: number): void {\r\n      this.labelNum = Math.max(1, this.labelNum - n);\r\n      this.labelMove(this.labelNum);\r\n      this.pageNum = this.scoreData.timings[this.labelNum - 1].label;\r\n    },\r\n    labelPlus(n: number): void {\r\n      this.labelNum = Math.min(\r\n        this.scoreData.timings.length,\r\n        this.labelNum + n\r\n      );\r\n      this.labelMove(this.labelNum);\r\n      this.pageNum = this.scoreData.timings[this.labelNum - 1].label;\r\n    },\r\n    labelMove(labelNum: number): void {\r\n      const timing = this.scoreData.timings[labelNum - 1];\r\n      this.labelNum = labelNum;\r\n      this.timing = timing;\r\n    },\r\n    changeScoreData(scoreData: ScoreData) {\r\n      this.scoreData = scoreData;\r\n    },\r\n    convert(): void {\r\n      const converter = new ScoreConverter(this.keyKind, this.keyConfig);\r\n      const data: string = converter.convert(this.scoreData);\r\n      if (navigator.clipboard) {\r\n        navigator.clipboard.writeText(data);\r\n        alert(\"セーブデータをクリップボードにコピーしました！\");\r\n      }\r\n    },\r\n    save(): void {\r\n      const converter = new ScoreConverter(this.keyKind, this.keyConfig);\r\n      const data: string = converter.save(this.scoreData);\r\n      if (navigator.clipboard) {\r\n        navigator.clipboard.writeText(data);\r\n        alert(\"セーブデータをクリップボードにコピーしました！\");\r\n      }\r\n    },\r\n    getLabelNumByPageNum(pageNum: number): number {\r\n      const labels = this.scoreData.timings.map(timing => timing.label);\r\n      return labels.indexOf(pageNum);\r\n    },\r\n    getNearestLabelNumByPageNum(pageNum: number): number {\r\n      const labels = this.scoreData.timings.map(timing => timing.label);\r\n      const labelNum = labels.reduce(\r\n        (acc, label) => (label <= pageNum ? acc + 1 : acc),\r\n        0\r\n      );\r\n      return labelNum;\r\n    },\r\n    labelOperation(pageNum: number, labelFlag: boolean): void {\r\n      if (labelFlag) {\r\n        // 削除処理\r\n        const labelNum = this.getLabelNumByPageNum(pageNum);\r\n        this.scoreData.timings.splice(labelNum, 1);\r\n        this.labelNum--;\r\n        this.timing = this.scoreData.timings[this.labelNum - 1];\r\n      } else {\r\n        // 挿入処理\r\n        const oldTiming = this.timing;\r\n        const framePerPosition = (60 * fps) / quarterInterval / oldTiming.bpm;\r\n        const newFirstNum =\r\n          oldTiming.firstNum +\r\n          (pageNum - oldTiming.label) * verticalSizeNum * framePerPosition;\r\n        const newTiming: Timing = {\r\n          label: pageNum,\r\n          firstNum: newFirstNum,\r\n          bpm: oldTiming.bpm\r\n        };\r\n        this.scoreData.timings.splice(this.labelNum, 0, newTiming);\r\n        this.timing = newTiming;\r\n        this.labelNum++;\r\n      }\r\n    },\r\n    callLabelOperation(): void {\r\n      const pageNum = this.pageNum;\r\n      const labelFlag = this.getLabelNumByPageNum(pageNum) !== -1;\r\n      this.labelOperation(pageNum, labelFlag);\r\n      this.pageNum = pageNum;\r\n    }\r\n  },\r\n  watch: {\r\n    pageNum(newPage: number) {\r\n      const labelNum = this.getNearestLabelNumByPageNum(newPage);\r\n      this.labelNum = labelNum;\r\n      this.labelMove(labelNum);\r\n    }\r\n  }\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorController.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorController.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EditorController.vue?vue&type=template&id=76218d59&\"\nimport script from \"./EditorController.vue?vue&type=script&lang=ts&\"\nexport * from \"./EditorController.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport EditorController from \"@/components/editor/EditorController.vue\";\r\n\r\nexport default Vue.extend({\r\n  name: \"Editor\",\r\n  components: {\r\n    EditorController\r\n  },\r\n  props: {\r\n    loadScoreDataStr: String,\r\n    loadMusicUrl: String,\r\n    selectedKey: String\r\n  }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=39b41bb3&\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts&\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"start\"}},[_c('start-main')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"start-container\"}},[_c('div',{attrs:{\"id\":\"start-title\"}},[_vm._v(\"Dancing☆Onigiri Editor\")]),_c('div',{attrs:{\"id\":\"start-menu\"}},[_c('start-uploader',{attrs:{\"msg\":_vm.musicTitle},on:{\"fileRecieve\":_vm.onMusicFileRecieve}}),_c('start-uploader',{attrs:{\"msg\":_vm.scoreTitle},on:{\"fileRecieve\":_vm.onScoreFileRecieve}}),_c('div',{attrs:{\"id\":\"start-go-next\"}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedKey),expression:\"selectedKey\"}],staticClass:\"uk-select uk-form-width-medium\",attrs:{\"id\":\"start-key-selector\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedKey=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',[_vm._v(\"5\")]),_c('option',[_vm._v(\"7\")]),_c('option',[_vm._v(\"11\")])]),_c('router-link',{staticClass:\"start-go-btn btn-red\",attrs:{\"to\":{\n          name: 'editor',\n          path: 'editor',\n          params: {\n            scoreData: _vm.scoreDataStr,\n            musicUrl: _vm.musicUrl\n          },\n          query: { key: _vm.selectedKey }\n        }}},[_vm._v(\" NEXT \")])],1),_c('div',{attrs:{\"id\":\"start-version\"}},[_vm._v(\"ver 0.0.0 created by SKB\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"start-music-select\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.ondragover($event)},\"drop\":function($event){$event.preventDefault();return _vm.ondrop($event)}}},[_c('div',{staticClass:\"uk-placeholder uk-text-center uk-margin-remove-bottom\",attrs:{\"uk-form-custom\":\"\"}},[_c('input',{ref:\"input\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.loadFile}}),_c('span',{attrs:{\"uk-icon\":\"icon: upload\"}}),_c('span',{staticClass:\"uk-text-middle\"},[_vm._v(\" \"+_vm._s(_vm.msg)+\" \")]),_c('span',{staticClass:\"uk-link\"},[_vm._v(\"参照\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\n\r\ntype DataType = {\r\n  vue: Vue;\r\n  file: File | null;\r\n};\r\n\r\nexport default Vue.extend({\r\n  name: \"StartUploader\",\r\n  props: {\r\n    msg: String\r\n  },\r\n  data(): DataType {\r\n    return {\r\n      vue: this,\r\n      file: null\r\n    };\r\n  },\r\n  methods: {\r\n    ondragover(e: DragEvent): void {\r\n      if (e.dataTransfer) e.dataTransfer.dropEffect = \"copy\";\r\n    },\r\n    ondrop(e: DragEvent): void {\r\n      if (e.dataTransfer) {\r\n        const file = e.dataTransfer.files[0] || null;\r\n        this.file = file;\r\n      } else {\r\n        this.file = null;\r\n      }\r\n    },\r\n    loadFile(e: Event): void {\r\n      if (e.target instanceof HTMLInputElement) {\r\n        const file = e.target.files ? e.target.files[0] : null;\r\n        this.file = file;\r\n      } else {\r\n        this.file = null;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    file(newFile: File | null) {\r\n      if (!(newFile === null)) {\r\n        this.$emit(\"fileRecieve\", newFile);\r\n      } else {\r\n        alert(\"ファイルが見つかりませんでした。\");\r\n      }\r\n    }\r\n  }\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StartUploader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StartUploader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StartUploader.vue?vue&type=template&id=692eb448&\"\nimport script from \"./StartUploader.vue?vue&type=script&lang=ts&\"\nexport * from \"./StartUploader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport StartUploader from \"./StartUploader.vue\";\r\nimport { KeyKind } from \"@/model/KeyKind\";\r\n\r\ntype DataType = {\r\n  musicTitle: string;\r\n  scoreTitle: string;\r\n  selectedKey: KeyKind;\r\n  musicUrl: string | null;\r\n  scoreDataStr: string | null;\r\n};\r\n\r\nexport default Vue.extend({\r\n  name: \"StartMain\",\r\n  components: {\r\n    StartUploader\r\n  },\r\n  data(): DataType {\r\n    return {\r\n      musicTitle: \"楽曲ファイルをドロップ\",\r\n      scoreTitle: \"譜面ファイルをドロップ\",\r\n      selectedKey: \"5\",\r\n      musicUrl: null,\r\n      scoreDataStr: null\r\n    };\r\n  },\r\n  methods: {\r\n    onMusicFileRecieve(file: File) {\r\n      const mimeTypePattern = \"audio.*\";\r\n      if (!file.type.match(mimeTypePattern))\r\n        alert(\"音楽ファイルではありません。\");\r\n      else {\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          const result = reader.result;\r\n          if (typeof result == \"string\") {\r\n            this.musicUrl = result;\r\n            this.musicTitle = file.name;\r\n          }\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n    onScoreFileRecieve(file: File) {\r\n      const mimeTypePattern = \"(application/json|text/plain)\";\r\n      if (!file.type.match(mimeTypePattern))\r\n        alert(\"譜面ファイルではありません。\");\r\n      else {\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          const result = reader.result;\r\n          if (typeof result == \"string\") {\r\n            this.scoreDataStr = result;\r\n            this.scoreTitle = file.name;\r\n          }\r\n        };\r\n        reader.readAsText(file);\r\n      }\r\n    }\r\n  }\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StartMain.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StartMain.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StartMain.vue?vue&type=template&id=60ada4a2&\"\nimport script from \"./StartMain.vue?vue&type=script&lang=ts&\"\nexport * from \"./StartMain.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport StartMain from \"@/components/start/StartMain.vue\";\r\n\r\nexport default Vue.extend({\r\n  name: \"Start\",\r\n  components: {\r\n    StartMain\r\n  }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Start.vue?vue&type=template&id=68ad6a46&\"\nimport script from \"./Start.vue?vue&type=script&lang=ts&\"\nexport * from \"./Start.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport Editor from \"./pages/Editor.vue\";\r\nimport Start from \"./pages/Start.vue\";\r\nimport Router from \"vue-router\";\r\nimport { KeyKind } from \"./model/KeyKind\";\r\n\r\nVue.config.productionTip = false;\r\n\r\nVue.use(Router);\r\n\r\ntype PropsType = {\r\n  loadScoreDataStr: string;\r\n  loadMusicUrl: string;\r\n  selectedKey: KeyKind;\r\n};\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: \"/\",\r\n      name: \"Start\",\r\n      component: Start\r\n    },\r\n    {\r\n      path: \"/editor\",\r\n      name: \"editor\",\r\n      component: Editor,\r\n      props(routes): PropsType {\r\n        return {\r\n          loadScoreDataStr: routes.params.scoreData,\r\n          loadMusicUrl: routes.params.musicUrl,\r\n          selectedKey: (routes.query.key || \"7\") as KeyKind\r\n        };\r\n      }\r\n    }\r\n  ]\r\n});\r\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport UIkit from \"uikit\";\nimport Icons from \"uikit/dist/js/uikit-icons\";\n\nimport \"uikit/dist/css/uikit.min.css\";\nimport \"uikit/dist/css/uikit-core.min.css\";\n\nUIkit.use(Icons);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount(\"#app\");\n"],"sourceRoot":""}